---
repositories:
  - name: fluxcd-community
    url: https://fluxcd-community.github.io/helm-charts

releases:
  - name: flux
    namespace: flux-system
    chart: fluxcd-community/flux2
    version: 2.11.1
    wait: true
    hooks:
      - events: [ "postsync" ]
        command: kubectl
        args:
          - "apply"
          - "-k"
          - "flux-manifests/"
    values:
      - helmController:
          create: true
      - kustomizeController:
          create: true
      - sourceController:
          create: true
      - notificationController:
          create: true
      - imageAutomationController:
          create: false
      - imageReflectionController:
          create: false
