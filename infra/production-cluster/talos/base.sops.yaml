version: v1alpha1
debug: false
persist: true
# Provides machine specific configuration options.
machine:
    # The `token` is used by a machine to join the PKI of the cluster.
    token: ENC[AES256_GCM,data:4unpH01K2arZ2wm/rzlfr7eMNAdWLl8=,iv:zuITTxQJalBDbdl/vsDLwPeqABihPwdXvHIguYD5Fak=,tag:zqoGOGjHpNp4qScoGgL50Q==,type:str]
    # The root certificate authority of the PKI.
    ca:
        crt: ENC[AES256_GCM,data:gunvmYdoWyrltE4k9nJAd5fnGvQozFOs5C+aV4amcY1Mo0E1Rc6r9K6pEAl1kur8sudkcTJt+CfS9zoSaGRkZXhVKAN308Q9npETtluSq96mqWqo1NDoSd7G/4T1Q1iRF4qS/LgnLnM6fFlDSl3R7desp4Kc6jZ9cuRVvyV56Me3b5neCTEKnJ/9i2uG4MQSEISXQHz2KyMc+TLrIpK8jRXZB9PGAzE/sbdw+Wzkmd+0ls6ZKm/Bhhf/ZTO01KROaMCWXAOhgoZThDnD+2LP3lJpBDYsOwnweuwcEDN1ouAB5OSFZIqPdxg2focxY3pC3kg21Z0cGpQgbxR2rqdnoe67Iu3GQ9JNVU7WvLdhgdxkAns0nyoWTcSkXNNS5u1lYGhgsMay4eVc+qvGhqEdh4zumdLGR/IPcSS8sX/Hqs55jOtZJqypQQWDbKonHXfUyfrJRvhNTWbRUQg/dbges/SFAh/nWFboVQAlwD9mJrKWJ08XVzbVdJX9O9jM1+i83VkYpxjxcCe7u6K5Re9BbhQcHVRmBvdmEM3sCUJFAeEBPCIWFz63rAM5WfWFuPkAC3FuDOq6S5NpOQLhK10EIi6uMbaumWfzQ5X+j1boYp1zsf24Vu0oGHd++u9EkxqvgGnZ7A+BWD1T/cDdRfznMKALGd60rJwVEcm1dagU204d1FAKMubFQk84xckRwLKzN88Xy060MGWIoFaH5tmqex+cyCTrDahcMoZw+CwVFYtUMutPdVDJsPQvtFRos8KswAgijKoepPvISHbi9pIg4ey6J3vrIwfFEYh1QULlu6tiCMymfujtN9i4VIizVkO8cCRogUExPvU+6ZstQKQP06DU6xXcS8QuMJkhg8JzdmTf0L0p,iv:r4WyLCCtJ3JavbLdpVQAUJrvT5JECub7g4gQb2coRkc=,tag:gTyVoEPZ8fczZjoCKANC6A==,type:str]
        key: ENC[AES256_GCM,data:3lnpHiFpgxFMJ6TNSjjLsvmlNoNenxogBXGNVBAa5IJLdVADv1kJtLP0uMtXpWnqSYcbYI51qsE/nfGswxjxD1Ctu5q9h0b7A2dUhceJXim53+nnH8tPc3OyNDd3ZZNrDdRnVT83zEnEtemZkitX79ifUfIIJAoQbEA9sk8uWUGb8B4mf23s1YUXB4Iq/Mda269XC7oQ9V5MMMR43KtZZrAmn8XE38cGd4Xq1dgr/DmYKnY2,iv:aNMj3+qurLn6TSceB+jAzh2dKaABN2AIMqtjBmv7pRU=,tag:PyxA+AXmD7vHUJwPLiJ0JQ==,type:str]
    # Extra certificate subject alternative names for the machine's certificate.
    certSANs: []
    # Used to provide additional options to the kubelet.
    kubelet:
        image: ghcr.io/siderolabs/kubelet:v1.27.1
        defaultRuntimeSeccompProfileEnabled: true
        # The `disableManifestsDirectory` field configures the kubelet to get static pod manifests from the /etc/kubernetes/manifests directory.
        disableManifestsDirectory: true
    # Provides machine specific network configuration options.
    network:
        interfaces:
            - interface: eth0
              routes:
                - network: 0.0.0.0/0
                  gateway: 172.16.42.58
        # Used to statically set the nameservers for the machine.
        nameservers:
            - 172.16.42.58
    # Used to provide instructions for installations.
    install:
        disk: /dev/sda
        image: ghcr.io/siderolabs/installer:v1.4.5
        # Indicates if a bootloader should be installed.
        bootloader: true
        # Indicates if the installation disk should be wiped at installation time.
        wipe: false
    # Allows the addition of user specified files.
    files:
        - content: |
            [metrics]
            address = "0.0.0.0:11234"
          permissions: 0
          path: /var/cri/conf.d/metrics.toml
          op: create
    # Used to configure the machine's time settings.
    time:
        disabled: false
        servers:
            - time.cloudflare.com
    # Features describe individual Talos features that can be switched on or off.
    features:
        rbac: true
        stableHostname: true
        apidCheckExtKeyUsage: true
# Provides cluster specific configuration options.
cluster:
    clusterName: production-cluster
    allowSchedulingOnControlPlanes: true
    # Globally unique identifier for this cluster (base64 encoded random 32 bytes).
    id: ENC[AES256_GCM,data:jtEvN4JPu2t39H2yiHOB7lcp+iCFt+wiHABvQcIXDkrh6Ep/z9vr5wB5/3Y=,iv:WoyISd53tNzvVwl+I6QDk6SzTLwiud2PpmE9I3qu42U=,tag:PSWr71L8Q/Db7jCBTPulaQ==,type:str]
    # Shared secret of cluster (base64 encoded random 32 bytes).
    secret: ENC[AES256_GCM,data:No5moxdwegmIQZ9BxPdfV/4Gt2MxVBPD1WxigkSlT3m/NafPoP5JRde76ak=,iv:vGN9t7fGnK6TeBV3au1ECr2HD+q8BHbQ4QfUYa/qYkY=,tag:ZCkG9b9RYPfFEtlNWfBPbQ==,type:str]
    # Provides control plane specific configuration options.
    controlPlane:
        endpoint: https://172.16.42.30:6443
    # Provides cluster specific network configuration options.
    network:
        dnsDomain: cluster.local
        # The pod subnet CIDR.
        podSubnets:
            - 10.244.0.0/16
        # The service subnet CIDR.
        serviceSubnets:
            - 10.96.0.0/12
        cni:
            name: custom
            urls:
                - https://raw.githubusercontent.com/projectcalico/calico/v3.25.1/manifests/calico.yaml
    # The [bootstrap token](https://kubernetes.io/docs/reference/access-authn-authz/bootstrap-tokens/) used to join the cluster.
    token: ENC[AES256_GCM,data:tApaM9VjKMjJbpvuNFglsfbftfTev+s=,iv:wiTEU2F8g2fAaPllZFpAdJ+kkyBFuuD4/xx72OUpPao=,tag:lqQ5yY2wE9wX9wE4hTf2zQ==,type:str]
    # A key used for the [encryption of secret data at rest](https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/).
    secretboxEncryptionSecret: 2o/L7vgS9Trb7qrPXGJkY6hYkaaRPuIuS6vpVtrbFh0=
    # The base64 encoded root certificate authority used by Kubernetes.
    ca:
        crt: ENC[AES256_GCM,data:G0Yp8U1N3rbnR3UMWnoe3tMelQoXIGUADu/FN3COhNrB8o5+9NzY3TocfiMSePO7QfeNT//b0yqsDE/Vg9g6YIXm36ge9N6o5Wi2fyLpXtvj2WLVxSzNP2GkWw+HNVNYmZ5k7EvHDFlFiTFaitvSWCjxN0/KEF3Q2LJmwZOMEUSMLaEIdzcp2B5apWT7eS8Pz5YAIPVizhwa5nPdDRfL21WaMjmcv6thns+WuVmiZ5qwqZyblTQtDDZQ2MTfz7RcMBnfSSHivH2qAbEv1j0nOGX9j/7VSbjMKv6Ifih1Bsvedbwylv87eESI4IKcHfWZ/V+BeLF0fUTbpA6z5iDVhBD7A5nwN4Zri3OwA5dnuCheyXGVojdw20NjYukcH1Uy891rLBmLFShsRN5OYuDGf1vcicjcSQxZXonEYUam/IgHoBrCQOEN1IYZCEIqlDW1YQMgPzDzov/rJswJyTvLD9u27dkjgb27ZEBQZFjkQl3IZXvqYf+X8MfofzQc0NqL0Iq49N1F7ARk6AXOIMrvQ6ITSmn0zjn127UZGYxcaAyYwnLHeQe5x1Xz4ruS6aIdRwUAMUxtQNAI1p57EUgS9YZtrhK9gnqk+xUFxCY3Zcw/ordsc5XtmANq24Xf9hRLcKnACUb8WhlvlgwJE3cmVuaqZXM2CtrCJqU4vNGV+dfpwS+z7SS8zWz5/eVJys2bnK+q79PDphbmgNuzergCugJ/jHV4nH6mRZBMkv+11xyYlhdjWHFHDiE1MIPewb6svRIkwkcsvH6WrMzPjr9EYbHOwl7qe8uQs11tx/bipzt8rSN4WpVgNjylLsWgy97UKi2i1z1YDBXJdxwHF11XkhUlvk6psu3INJScs+Yme3Lp3V3NxNuFWthtaxCcUskDCnCRk1iO3kug8NSiJZUko8dHGHxOZpjDvLHoQqbaHBttH7TmNl5qIS7HHR00x5AnZxqgZQHb54GEAVIoJEeTWbP7SBKv1rsgzRghR4V2qwwGZODq8PnmxsSFNZ4JJR2A3NbqcLkVu/qGFGtwFxMabABsRcipDa1w/RMmXA==,iv:Rqwxtx3wYpeFU+7gUg45GMRIACeWibcQI6pL0WLtJ/o=,tag:/T6sYTXXDR/0JLHsv52j/A==,type:str]
        key: ENC[AES256_GCM,data:0bNiS19KFiOpFKjswXfDd6IbyY8q9RK8knWaO6OG6we6ZSBl/PoV7zAfu+iVQURPZOQjYTZAXfVJP2u09PzUqDGcl8NlPKX1b+JLfeBFs9a7/5JBg0WsDo3L+5p7w1fbtrUU7Nu9oBYvX7uUUd56Ta/zCQicinLVC/7nDlvJnionegJPTr7moWG4apOJU4DpqEtLYiei3UQ9/RnT8X4v9qho78wB91GUd6tYRcpCkVG8d316Rq3KP2iHHjShLGMyqXmVs3o5r1hbWMI9VepulzuwYxgX9w5pb+fAXeFA+f4mJnMcwITAO4v1cNbIUqKwo0MzfS/n6cSApQfMRmRb1gXGS11MQzdc2B03AnzEmkNVsl14mdl9+z7c47bJoff6Y726qiy1nKdcG6w3kx5vZg==,iv:Qf6WqIjJ4Y0tAiTpon34kHQXux2/oOnoUC+b2YLc1bs=,tag:kEd3axEbHNRamujIp8BDQA==,type:str]
    # The base64 encoded aggregator certificate authority used by Kubernetes for front-proxy certificate generation.
    aggregatorCA:
        crt: ENC[AES256_GCM,data:Uhz87Tr9dff5mB5q1dTDp3vW4nU8AlDiYIVc+kCWhtKaj0KIHG4WR40wanfZmOI+lG8cZPcsPbDZr4P29tvHop84u2oV6xeN3SsLy/zEzaN1GFvL8fvlxtypce3bY78G0UnYjXZfelrCxbpr9LAQPaKQlis0arn2w7DA0z572TvXyu0eqgKBrB3ameQ1kToHkBz2nbTB53QS5ebbAElidPMQeAW9UegGNlHNbq61Wir81dp0tX3MOGpmr/gpKch3UBURGC4dLlMxJ/kvAFs2yFtQ976bPTBUXBtXVa7FkU/z883pgWFfP5o28ix2F1zPJ7NHtWdcyDtyNZdflKVb/PuQRUEbpb8ZXqMTth3wTH3tsKgnmxsvexqTLvoiUEddzREmjZBUzJGCsIv9yuUls4fKnJyxt2WDc6wwum8jBiTa4YF5/fWS7z+JhbLHyGUqYVAjrp8oDlKQIn0UwEpbwa8b5QWiDU2l9+NZ8r7J7HA15avttoOQ+Z7oI8pUY+4yzztxHEC3VZ65BloYaiGVat0K28uTd6At82xBvByjQVgUeCOOpg3ziJcURvyfABDZgGJeXzIgMwzH0l8pPQWjoInHoULsJXiRFY6yv1F5RFy/uxW3S4M6txd1r9MRcIQEVxRKe3BYMpEzgzMq7Zf66eSIyX8I1liUSCk+pCn4Ftc70KpMwGeOFBZBXfvLozQqJyAG6d7Aa7dH02dTYMMrCuXcVOIChd17862PO5wJKzKU/mwKtRGZVJXRAR3uBrAX4Ix+f5rfdVBGdY9lMvq+TDEQ71YgQd98qzJiLW+jQT/K78UFoWFdzgzbyfsXrLVO7ePR8MveBN7rlHCvlixb0ueNh28Dp8OWHq8AsQ64xqjy3ipXHs2uRcXIayCGTnrtSQVzPFF2HFWBXaYczTMfzNTNABLRndy17D3zTG4HqGXITePPQZ9909PVsTtUMQvt,iv:E8ZZdxvza+hmx4v3Foyre7mWRsQcFPMTv8Vpx32w5jQ=,tag:E+8/5moxA2nIKTn+6DeGVA==,type:str]
        key: ENC[AES256_GCM,data:5UDVLRuC4ETDsOUgyN8fiSgr8X+2Om26lGtpDZdwIJq4pOIubnkcoaX8KoSi6Pzk22zUPlhX1YyBgU8HtmgAphdS8KNY8RDW66RwEw9j7Sn/u1lPkpdrB4uGGYSPC92JQis9nGHWUNJTPmcsxycwx2NVK04RtzOkM4cidh5Ag6N09cVhqJtk7wF//QTzTS2uAG7Hv9P2zHScJxjb44Qk5iOVQ6M6Xvb9Jz3YWp8ry3rnJYxrv7W2wRk37UD0rhmVkIwBkwGmce3IxK8qUnDMbT10zcced6q+g7CI8Kk713Scxyo+JTprUSs7tGHukjiV388Y184HEi4oW82ZFjz6S63UrB6+jW6OMD9+labiDbO7AwlD25YVAm2PA21QQ3b/+U3ak/a9WCWLaYPiehatDw==,iv:kIcZw0ocnyjTQvb2yZ2q4dAo6Zm3f4GGmAI/EF1F9Tc=,tag:SgDw8WVqroveoOi/+ajrEA==,type:str]
    # The base64 encoded private key for service account token generation.
    serviceAccount:
        key: ENC[AES256_GCM,data:JtMUk89YaEM4zXJuN/6sDRBRSfDotDROEb3KWPcx3ClBG4QISb2X1nbMZUu2SJWn4cSupIHeisnQKLd/IG3LNLKq0ZF7cob5Z0M8aRafMBfryNQxFTA/SDhvBhDdPlKcBHTLCYs8zYR1+l7iwuKXNwRd0ULkUk7CUMoiDerd/NmhVLcgR8BzBd5ajE4kwzedHrNIpCVcK9WU3SQxeo6xFNonmKrpAT/c/vS482u245SZ0p9fMmu8+G2crWL/GoNAL/DRRSAiU9qCpfmIb9ETKMkdVivSPanQAV5MhWBuFsPOGIs4d7RVmWtI8W9wNpTpgSqYmHiPCB+e6VGNu5laDxzmKXJPxlK08U/VlCY7X+xsLD67AwDhrY7f0YzZZbpyDPf/PQYIIJXQ3UibW768+w==,iv:nP6pB4X5ns1MeqgFoNAmE2gT8QOXmUkxKucaOWPaUrQ=,tag:4nyhEDgbTLfBhxw3vJUMlQ==,type:str]
    # API server specific configuration options.
    apiServer:
        # The container image used in the API server manifest.
        image: registry.k8s.io/kube-apiserver:v1.27.1
        # Extra certificate subject alternative names for the API server's certificate.
        certSANs:
            - 172.16.42.30
        disablePodSecurityPolicy: true
        # Configure the API server admission plugins.
        admissionControl:
            - name: PodSecurity
              configuration:
                apiVersion: pod-security.admission.config.k8s.io/v1alpha1
                defaults:
                    audit: restricted
                    audit-version: latest
                    enforce: baseline
                    enforce-version: latest
                    warn: restricted
                    warn-version: latest
                exemptions:
                    namespaces:
                        - kube-system
                    runtimeClasses: []
                    usernames: []
                kind: PodSecurityConfiguration
        # Configure the API server audit policy.
        auditPolicy:
            apiVersion: audit.k8s.io/v1
            kind: Policy
            rules:
                - level: Metadata
    # Controller manager server specific configuration options.
    controllerManager:
        # The container image used in the controller manager manifest.
        image: registry.k8s.io/kube-controller-manager:v1.27.1
    # Kube-proxy server-specific configuration options
    proxy:
        # The container image used in the kube-proxy manifest.
        image: registry.k8s.io/kube-proxy:v1.27.1
    # Scheduler server specific configuration options.
    scheduler:
        # The container image used in the scheduler manifest.
        image: registry.k8s.io/kube-scheduler:v1.27.1
    # Configures cluster member discovery.
    discovery:
        enabled: true
        # Configure registries used for cluster member discovery.
        registries:
            kubernetes:
                disabled: true
    # Etcd specific configuration options.
    etcd:
        ca:
            crt: ENC[AES256_GCM,data:IVGXIFpvdQ9SVTNgCAnhMJFw3S6g1LIxaLeuuxV8h7hLvwtw4e8eIu9QvEhKtjOEPkde1WFWJYGL/LUD97kT+znWitCF8yq0yH9soKHL0112CXLBuciGV5MeCgJ1liO53v5GJBqWf3f5lnc7wkmbzTSayzFmC//39myU9b2Ux+a2NEoq0QEWZ2fYnx8yDhNo7cW2mr65UxijMDxyrQevFF+kUTygqSlAK5JbGVlB57rDQJJhxUaHEZ3kxsOh3g0m0/xdLsI7zVkQBm6pdc35DZ0KPFc6jbgZkMVpxwo5UuFs198Ra1d0rIzggPD7Y/uOXMO3AatdhYz0BVAsHklJsX8QNwlpBbBygS3ty9Ll3Kq1VKQx8vPkEino8lBwLCz4A9rFdC4ujtKSm5aUzJhZlBHUmoR127IlQUaq2xfGrWNx2w8uuIes76C9qN7u6eoNiJhuuZCWtTAKY4AYNKXjFFDyhFmvu3Ol2Em5o/BoTlRABKptINxPFgaStFvVi0Y/9bWrF99yacz0tA4rIg4fF+zukHuaO0cXN0GsWXEggm12TGrWNDt4V3MJfl82t0xoTiD+491CT13yrPBSg3PaMJZfiIlXigKIizI6Nae+R7Q3agqWkAVUOT6FmDzOuJCgal3tx3yACIKa1ltu36W7VXWbkCinCm58csodAkSiQbHuhIdy6Ooo1wRT8b+DPf4CQEcH5A0CNwsxhYUkBbn76HiGaZocniPONqMsabwlvrcRr89+PPpBfCU1scTsEuQRkdeGVtKhIlxeoyRWIGzWZtvnIUT4w7kUZrCEyHZG8UG4eWaQtqW9RfgrwKmYMSpW/bi+9g2NnG/sOnkIPvcRaVSvSSQa5ugxMpbWld2msmvCDYupsB8OxyFat3IgMSO0oUPPjyvVe5ZkDIDxiJa1dwNB8vNVIFcNKnoEbDCJCGiE5Ei4PIyZWLr0WnVZW8CpW/eNf/CfdlQDUJywesbjx8V5tGRPGE1XvwO2Ahj9QFjSWGTzFjmdlaPLtPJFWF2r,iv:cUApAwx7Djggl/BsPOFi3BGKue6v+GE50u2Z1j0Pf8U=,tag:nwiNDHb3TSGXxWuVDSsl9w==,type:str]
            key: ENC[AES256_GCM,data:pzKeZb7TL9hT2PTd2aZJ7YgbscuodbVwC5R/AF27TUNzDe/A3gzp9nT9IFBWUmHvd7lJvQbneoKOKA4t2tO1tPsQhPdjPPMma095l0PMVBF+OFl2FgFGAuPykMQ0fsWGZJDkkvGMD9FWOrY01aT3RGOf+5ql9aNq8/52FOeFzA62B0oMjinbe1Q32aBmmBCgKwvBvnskMgoWYTgh0F6YZl+MNR6LbzuWpJHg0HgwWOa4g+g6h+MB1xCGcwfkh14sPI+rolVahmAMjyEV7zERx4Y+6UIrGt00OOsmEIUn165wmvmd2tBXxNTf4v805StRrqCZmvaiQVexGpQcaRqWkMFWklzmMzvK82pMQ0ocqMN8DfSRRmTpMcQWpBDk5FsWN9imrH9i1L2JzQ1OAHfSTw==,iv:6aGG1y3AbxFVoyp3ytXdxjculJCI04Tex7xW3XjBN+M=,tag:TL/SEdNhhNR+frN9Lx7RcQ==,type:str]
    # A list of urls that point to additional manifests.
    extraManifests: []
    # A list of inline Kubernetes manifests.
    inlineManifests: []
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1z6la87sppenwcdcr7lqj8amf5e4x7dq9gzr739cwg5ve6vgj0d8s6cahdj
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBZaXVxaVREWEFYYkRwaVlV
            QzZOa2FnUkpNMkc3WjZ1b0gvbnNvM2lBK1VVCndiSGtyRGhWMHlqWGxvMWF2OE1w
            TUlWM0grSTAvNEdXRWpjb25CSHV3V00KLS0tICtIbXRrSGg1a1BlZGNad1lWaXRk
            a1k4WVlNQmRlbGdNdS96MVhPRjVwdEUKZ/198D+aJGaePIw6QmZIaEW2XShubKHI
            DlxPkRCwh1Isyj4Zd/rHsN+Myv/0YYTHbg2/bD4hZjBW2yOopxKsLA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-06-17T13:18:51Z"
    mac: ENC[AES256_GCM,data:ZsEEOQlkkna/0TofFtx25+WSybdwge1T9hJWZwBb5U/a5qk2IzZEYtCm8YivF8JdY0gLfZSLt5TTLiA7u5akTzzqu9pHBdr8dpmjpW6UmvSsrmHJf7m2jVMWKZfw5fEuiBAYvJdUb0Xzz28GXfLfxMXLsOp5x4AXAVsVWJeEU/8=,iv:wzLNm4TDa+x4UFcjVj7L0uzyL8qnYKn6cJF/ckUFbZI=,tag:+qtid0IphLRvojFIv57+2Q==,type:str]
    pgp: []
    encrypted_regex: ^(id|secret|bootstraptoken|secretboxencryptionsecret|token|ca|crt|key)$
    version: 3.7.3
