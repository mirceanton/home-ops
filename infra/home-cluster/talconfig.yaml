---
clusterName: home-cluster
endpoint: https://10.0.10.10:6443
domain: home.mirceanton.com

talosVersion: v1.5.5
kubernetesVersion: v1.28.2
allowSchedulingOnControlPlanes: true

patches:
  - "@patches/cni.yaml"
  - "@patches/kubelet-certificate-rotation.yaml"

worker:
  patches: []

controlPlane:
  patches:
    - "@patches/keycloak-auth.yaml"

nodes:
  - hostname: cp-01.dev.k8s.mirceanton.com
    controlPlane: true
    ipAddress: 10.0.10.195
    networkInterfaces:
      - interface: enxf209426c8143
        dhcp: true
        vip:
          ip: 10.0.10.10
    installDisk: /dev/sda
    schematic:
      systemExtensions:
        officialExtensions:
          - siderolabs/qemu-guest-agent
          - siderolabs/iscsi-tools
  - hostname: cp-02.dev.k8s.mirceanton.com
    controlPlane: true
    ipAddress: 10.0.10.194
    networkInterfaces:
      - interface: enx62bcc5c16107
        dhcp: true
        vip:
          ip: 10.0.10.10
    installDisk: /dev/sda
    schematic:
      systemExtensions:
        officialExtensions:
          - siderolabs/qemu-guest-agent
          - siderolabs/iscsi-tools
  - hostname: cp-03.dev.k8s.mirceanton.com
    controlPlane: true
    ipAddress: 10.0.10.193
    networkInterfaces:
      - interface: enx2a74dfcaae21
        dhcp: true
        vip:
          ip: 10.0.10.10
    installDisk: /dev/sda
    schematic:
      systemExtensions:
        officialExtensions:
          - siderolabs/qemu-guest-agent
          - siderolabs/iscsi-tools


  - hostname: wkr-01.dev.k8s.mirceanton.com
    ipAddress: 10.0.10.192
    networkInterfaces:
      - interface: enx12061545ed40
        dhcp: true
    installDisk: /dev/sda
    schematic:
      systemExtensions:
        officialExtensions:
          - siderolabs/iscsi-tools
          - siderolabs/qemu-guest-agent
  - hostname: wkr-02.dev.k8s.mirceanton.com
    ipAddress: 10.0.10.191
    networkInterfaces:
      - interface: enxf6532c2101d7
        dhcp: true
    installDisk: /dev/sda
    schematic:
      systemExtensions:
        officialExtensions:
          - siderolabs/iscsi-tools
          - siderolabs/qemu-guest-agent
  - hostname: wkr-03.dev.k8s.mirceanton.com
    ipAddress: 10.0.10.190
    networkInterfaces:
      - interface: enxceddef0c1f19
        dhcp: true
    installDisk: /dev/sda
    schematic:
      systemExtensions:
        officialExtensions:
          - siderolabs/iscsi-tools
          - siderolabs/qemu-guest-agent
