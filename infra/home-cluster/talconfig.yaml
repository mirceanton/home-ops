---
clusterName: home-cluster
endpoint: https://10.0.10.10:6443
domain: home.mirceanton.com

talosVersion: v1.5.5
kubernetesVersion: v1.28.2
allowSchedulingOnControlPlanes: true

patches:
  - "@patches/cni.yaml"
  - "@patches/kubelet-certificate-rotation.yaml"

worker:
  patches: []

controlPlane:
  patches:
    - "@patches/keycloak-auth.yaml"

nodes:
  - hostname: nuc.home.k8s.mirceanton.com
    controlPlane: true
    ipAddress: 10.0.10.11
    networkInterfaces:
      - interface: enp100s0
        dhcp: true
        vip:
          ip: 10.0.10.10
    installDisk: /dev/nvme0n1
    schematic:
      systemExtensions:
        officialExtensions:
          - siderolabs/i915-ucode
          - siderolabs/intel-ucode
          - siderolabs/iscsi-tools

  - hostname: srv.home.k8s.mirceanton.com
    controlPlane: true
    ipAddress: 10.0.10.12
    networkInterfaces:
      - interface: enp2s0
        dhcp: true
        vip:
          ip: 10.0.10.10
    installDisk: /dev/nvme0n1
    schematic:
      systemExtensions:
        officialExtensions:
          - siderolabs/i915-ucode
          - siderolabs/intel-ucode
          - siderolabs/iscsi-tools


  - hostname: minisforum.home.k8s.mirceanton.com
    controlPlane: true
    ipAddress: 10.0.10.13
    networkInterfaces:
      - interface: enp0s31f6
        dhcp: true
        vip:
          ip: 10.0.10.10
    installDisk: /dev/nvme0n1
    schematic:
      systemExtensions:
        officialExtensions:
          - siderolabs/amd-ucode
          - siderolabs/iscsi-tools
