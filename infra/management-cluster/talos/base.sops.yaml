# Indicates the schema used to decode the contents.
version: v1alpha1
# Enable verbose logging to the console.
debug: false
# Indicates whether to pull the machine config upon every boot.
persist: true
# Provides machine specific configuration options.
machine:
    # The `token` is used by a machine to join the PKI of the cluster.
    token: ENC[AES256_GCM,data:4TflJ4dBx3sYWzic8gBB8yW2OSR5FiA=,iv:bmM9yRNIVcR2CkNiNoXcTpjv1Ip/SBGQN3aHchZLoGU=,tag:Y6cuuqBcYHr2oPfc+zcK4Q==,type:str]
    # The root certificate authority of the PKI.
    ca:
        crt: ENC[AES256_GCM,data:Rpp05HQiXnfESQkaOSbvQvRB/VUYpnFN64UQkIjc5vt9ZQMD3V87oMZutaYI/3SpRkGLB8GB29gisSVwB1OyteqI64Y9At65eNvmL+m6enHJTf130HjpurnHvhQWJLmi7Z3ZUoJKyteR8Kn2/RHi+rfEbCfruVtPO2qmq+hO7sa+glE/+XYh8uVDiK9oUU/V3RxZCPiZjrduOiOkzVC3k3F/lVKFDNZpBW1dT6eaCizFFAY1ep+0443pjicrFKkSvZyXbwZiarxtwlYA9gIsSscdDbr2WqX7gwURbXUktySLDADllPiJpDtUaZ5wceng9tbXxUiO6mRVbqXgNDrAZqDaOqUEILZWcBg3GapA3+Ogf5c6bKjNZwYfDytbJGgeMHlKm6WoNDqs5b+r6Im+5UsyCIoRoSK+ZUsKp2XpDuf7vSeH7xshjMzQHGWkf/L9NfmsicSueDJIJlVybwdaY8XZ6q5btGtgxf8jPPqDV43EJ/OwDz6Qq2RCiTYfddqSXBlH2SV52oGNfdwDdsGxSVaLl3BU8rHuOsBOVM/voTo4rGVm7TdwZrVAWWmvkL5VATp9iGhr/vdLIAavHcTfXxytALszk2SVBmz2Ni+0tIH+b1/e+au3oh7aEvRaAWyUQ1vpFX0xMrFM8n8ICBGVlulifcRcD+Lmy3nGGqz4U7aIMGgawSFINasASj2upvqRN0/MKKB+HvaWsSXrfciJnXqywHbUYql5fOaXlc++miadPcY7gZojC4hDhshJ5UfhfnyE5Ah8DQYkmJ2k5msYJVoa5MihasOernkq7ueL3a/7M3bukFkXCZfctDm+eo87tXkrV2M75PQA46wuP6q6vmSrmCinAaDbh08gP9sGn3sMyxCp,iv:fmTn6ZfwfwVKa9smDusM1wsn30sfGSEk2sUpCtRE2zE=,tag:EIx5IJcrY5+rrLhYMOOafA==,type:str]
        key: ENC[AES256_GCM,data:IKa/FNZkpBIe14D2GnZirg+IWie9e6LW45Pti2aOshAj3eKDHvXZbggQsG7a8NiOCz9w90GpBeUwZ4afVGtCGWf6eEFMn0VFHv8ZvEeopbxtWszcIjgbJFAGz+hA7g+U62idx/EKLm+/AZjVzBeXCe8YnalBP6LfdJamF5ClebeP+Wl28GSSU/GwyV/Jap5Hw1oNUHgZoC4zty4jy6yQa5quhPiZlXIFiH3mZDEhq5Bzqa4Z,iv:2o0SC/IvUJTowrG4taNtWbZyR0xXg23Ow23twHTby+A=,tag:TdyePLAevLuXBeXyKzABxA==,type:str]
    # Extra certificate subject alternative names for the machine's certificate.
    certSANs: []
    # Used to provide additional options to the kubelet.
    kubelet:
        image: ghcr.io/siderolabs/kubelet:v1.26.6
        defaultRuntimeSeccompProfileEnabled: false
        disableManifestsDirectory: true
        extraArgs:
            rotate-server-certificates: true
        extraMounts:
            - destination: /var/local
              source: /var/local
              type: bind
              options:
                - rbind
                - rshared
                - rw
    # Provides machine specific network configuration options.
    network:
        interfaces:
            - interface: eth0
              routes:
                - network: 0.0.0.0/0
                  gateway: 10.0.10.1
        # Used to statically set the nameservers for the machine.
        nameservers:
            - 10.0.10.1
        # Allows for extra entries to be added to the `/etc/hosts` file
        extraHostEntries:
            - ip: 10.0.10.11
              aliases:
                - mkc-01
            - ip: 10.0.10.12
              aliases:
                - mkc-02
            - ip: 10.0.10.13
              aliases:
                - mkc-03
    # Used to provide instructions for installations.
    install:
        disk: /dev/sda
        image: ghcr.io/siderolabs/installer:v1.4.5
        # Indicates if a bootloader should be installed.
        bootloader: true
        # Indicates if the installation disk should be wiped at installation time.
        wipe: false
        # # Allows for supplying additional system extension images to install on top of base Talos image.
        # extensions:
        #     - image: ghcr.io/siderolabs/gvisor:20220117.0-v1.0.0 # System extension image.
    # Allows the addition of user specified files.
    files:
        - content: |
            [metrics]
            address = "0.0.0.0:11234"
          permissions: 0
          path: /var/cri/conf.d/metrics.toml
          op: create
    # Used to configure the machine's time settings.
    time:
        disabled: false
        servers:
            - time.cloudflare.com
    sysctls:
        vm.nr_hugepages: "1024"
    # Features describe individual Talos features that can be switched on or off.
    features:
        rbac: true
        stableHostname: true
        apidCheckExtKeyUsage: true
# Provides cluster specific configuration options.
cluster:
    allowSchedulingOnControlPlanes: true
    clusterName: management-cluster
    # Globally unique identifier for this cluster (base64 encoded random 32 bytes).
    id: ENC[AES256_GCM,data:y/Wdwls4PtxVTsG4Ocb8sJN7sn/LX3ikMPNo1gQNXwumj7fr7yKvBDuvrMI=,iv:d21PvTIFt/f+GlodmzpFA3OntsOe93jwxD4ueA/prIg=,tag:Z2uav8Nxssb3vyf/7zOj7A==,type:str]
    # Shared secret of cluster (base64 encoded random 32 bytes).
    secret: ENC[AES256_GCM,data:2PyWzr+EsHoj9kR0rKiaYWJ5OMZE903orciFcAyEcoiCie90iJ5WVwajYq0=,iv:e6tUZRGBHF1XkdooQ240yNau0EZfsJOSWvOWsf+1k9Q=,tag:VdEBYyev8ntxZFziOyBxSA==,type:str]
    # Provides control plane specific configuration options.
    controlPlane:
        # Endpoint is the canonical controlplane endpoint, which can be an IP address or a DNS hostname.
        endpoint: https://10.0.10.10:6443
    # Provides cluster specific network configuration options.
    network:
        cni:
            name: custom
            urls:
                - https://raw.githubusercontent.com/projectcalico/calico/v3.25.1/manifests/calico.yaml
        # The domain used by Kubernetes DNS.
        dnsDomain: cluster.local
        podSubnets:
            - 10.244.0.0/16
        serviceSubnets:
            - 10.96.0.0/12
    # The [bootstrap token](https://kubernetes.io/docs/reference/access-authn-authz/bootstrap-tokens/) used to join the cluster.
    token: ENC[AES256_GCM,data:Q3Lw8DPdaOf6ZtGwcAgeQaweAMPegjM=,iv:3AUDBQvtRrK5ZjGBj5F1+8brgQg1wuJt4nlYBdCkwoM=,tag:urSl3df+IFL/AtA1daJFGw==,type:str]
    # A key used for the [encryption of secret data at rest](https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/).
    secretboxEncryptionSecret: PZ09M5ZzWPWXxhCW1lpyIZI79tAS51zrtQFD6bUirUo=
    # The base64 encoded root certificate authority used by Kubernetes.
    ca:
        crt: ENC[AES256_GCM,data:qc8u6tj5EGpveGAAU9dMxNfd/PfyVYjI9viK2hmKKRa+h5L+CeiKvFaOnh1cmQVTZvUofwRuLRnoxoRUDgW8+Bjqj8uon98KMd4OYMkXs8df/qpQ7LKAWhaQBXEzK8GH6x1Iw3dGQCEu86QXczENo6CPZQDrnlFeB7VHBWQpY0Okz5bGKv4SBTdKJI/rLVVy1nBngqrBjv/f/+rj8u8zc26jHRrnYDt7rqYZgBmLtw53lym372A/zAgqwX2S4tHow3O9YeKwWzgj6wN41yxFHwJJWB+VpXchP+L5Zs5MqC4Jr1Qz4ZeWBgTB7/v0GQOvH7ArkZsvWSGXF7nI2oIYE7+jsY7cfFytPGcOnTPSk3WFm+YYG90uPmfTEGNJYpdAERmxjuSEmt+m4rvaJQ8RaU1RnwWFykETy00MGamGi8/EkOiX3gNyTO+s8dAFpvsnuCbd8M99dIYzyos+ZF52flUes9Ui4ukjLp8Qh0Qjc1v6LV96PdI+VHvNYwAf94mA/6YcpWfkgGqYC2odzoBq3mQKobnsppppdweVyJdtFYsoS96XpHPhjCT6y1Uj7yIxpDkn83d1RH1QlVxyeW3fYsGmYDperL8+5wYdVxKhuT13pOcRM9q4vxDdm5wr64j1jH8mYF0OqVJ4H9qji77dAKzinOSt3R8kxrKCiLl09eQ6gd4YnLzp16P57WAAphiP8fy2gHhFOG9A3uUnMvXEHVA/FnWDkaMGso+MmE6lUDUc5QrsbZyuyxgAvFRutEnAjRKXIWb2ldNHD720+c88OaLhpNSEuRDUBsIkhwmWKtY8ceMPRVscNen24E86KXGlduQ1nOENZBoGTKwfqmr25dylzS7zVsIYHOK17iKpfln5VQuVmxjKk5gf2IZl+nNLo4/xRafLgt0Wrxyf0/c4rjVls9R6orafTt5l/DL8n5BJEYYXHfhucU+Cne7d3s+pVmouqpuSLlOlBipQsKQ6mClt7ZbEl7Opf1PfA3DK6pWvu2g4H7hqzonoATcYI+1NpHPK9n/vKsKu5HbMGWF+FzSgNv2jsSjyfw12ww==,iv:Q6ZaFIn1R40r7lO0GHXmN9mKQovp8zhN+bYEQ5k3RYY=,tag:32DAvXvs6VyComuHOsc2OQ==,type:str]
        key: ENC[AES256_GCM,data:TJeJ8PGg2y8pmdFMnAoSZJiOMrMpkd/1c8ccWXWsgkGOLcWgb9LCBtptFUzOwvkhT8WyAGvqRHmZZnJkIFAzwuFkvdmoN4R/qOnoUc5RdymGHMPC6iiu+Oa1GsXvWcMr6cokzs5DOU8drvwOdP++ju4Ggv3rdYaBcqIH/lAj3yo2SE4M0WaK8zdTOnZ8kTRrySd6kUvSnPh1rFZJvV6lxw3iwOpmf1o0eix4CyGN6b5FglYl48tLWlv2MD1ZzNF4k3IqLtn4OKvBIXWauv8bcnvc/kY4qA+I3c3iduLxAhonSYZJgFH5ECVwLHKaay0ygK1QYZbMZq/QgRI9dFbA0H6xUFXITbi9IreBLfQhVjkPRcb/24G0KjwY6f7yTCvot9+GWWD0Ffi8ZQioRF3G3Q==,iv:3mYHE0GY7Gc8zEn/5TgjTrkc/XUt126Re++5TlI7mq8=,tag:CfY+O4asWgLbRqDWFgS6kg==,type:str]
    # The base64 encoded aggregator certificate authority used by Kubernetes for front-proxy certificate generation.
    aggregatorCA:
        crt: ENC[AES256_GCM,data:dlkYc7Ed5vBg4L4pIlbaMQfrlgiTwsTwzTpI0EKrXiCTAYBaFtiPlB2o1k/2EKT4r4rfOrZ/fblBW2tOVhG/lHNT73S7Rd+VgspF6zj7P17xwhwCc8IK6Rg11t1m8FSHUggxoly0Au/XpdZC5eHpDY43FmPQQc9b/Aq9KqPNb01D0/QDQ8iVsS9ixuc1y7NeuJDAPqX9oboVn58QrPtMnesflCPfmasShk/iVxA6ME2p9rrfzsyjPRzhOtnDkFHPSfHtMzXOJARLdjGLUPcPsC2wjrIj+YEZhQD2gGx/6YbffKFBC37xKvAEMdwnrt0bPePVjQe822oGCa0ZdvQJE2RkQZb/viCwjhnXIiSwFO4nen6JUh+o5OTN0qU8kkbA+iDc0BszyWNyc6HjZENFKW+tDQp8EBfbZcrfhCtMsSjhyrbwfc4TMz7GmzLgJXAn9IvrlL4dDUKcAXTsmw3aHoCaIbtEuHHt7JmYURcdXSFYTODNnkpNG/VuqBmT0tAMq23hN9ePL0+de8UToqc/daUuwmxVRjlhj3w6vjO2fYGqyz/TTAxL9+7UQshlts+3HCu0BZ1QMq7r1ux0x06DHrAFL+RB1IqR0E/z13LTSERaOJA++/7y9jiOE3RiewQpiQG/MrMHMnGWF6Q58FReiKl99r0oa/b6IjvhqRBX5g/fvPJVCeW4Y6Lkc7GK4bQF1BEqMD3zeJgPIjrSHgWISf+IdHqUBitF1RNK2K+NCFETJBOEFqXhsROqAu5y6be+QgKuEEYPnDGy6cjMfjv3MYlktyguLY8F/lIN4dbCYClWNYYdeKfYQMDhSiDLn9vqkxTxC4wur46UCJagHS/MLX0WKtMBzVYWI1T/8Z3Af3+PBBnwUT9nYykYPskU0/FirhsNohu3LRqeBey6orKCJFibrkc/J9ZZY95hwb4tciThTVN0G6/TB2tMkyYqcxXJ,iv:7e2GmsByrmGoA1jzC1ExcsDC1Z2r4lTbcGv6izdcaaY=,tag:si/naUfpV/Ls4MvKgOUBZA==,type:str]
        key: ENC[AES256_GCM,data:pzwKnAD09PHXQKsNUv8PH+RIWD9xuRCQcLLfJG3LxsVbZVbgifaUehzk7DMTJM6NZALgNar/kJGrLUYUzmWgIGQ+Opkf+w0Lmzv6FhI1MOoc4/uF9/xqdeW/fUba7Z/fso8cv8Qka6uGe4CiuqcJHqmKTiNVlT/Qm8w/ENsBlSTiV6nY8nFcpL4OwEvPQAELJ8KRgl7bHNCqxy3jFCBcenEEUjVl1V8KMEVvbCSfZk9vzlaHRHsxRdxyIfjtgD/225v89UkvdKEN1c6Cw+EdDqYlfCDZZMdDtPJSdxwypTsi93e9MvGHS+ivmhZtD82to5hN5lj9r36vJ5Zb8TD7yvuVtVwFp04GnB9WJlgmYj+lodqSUTrX7dPcnPvPvev4clXY8M8+tFjTZBG4upYoHQ==,iv:lWR0icaO6qgAptqG5EbtXCBWFsds23WDIXG7x2P06aY=,tag:LLXYdH4TtWkmMMZ+iSv8fw==,type:str]
    # The base64 encoded private key for service account token generation.
    serviceAccount:
        key: ENC[AES256_GCM,data:fC8Scai5QoMGw+yJ6ZjIQCzM11nK9Q35C36c+AicJ5PS3pjqWUGmEyarSADUnEJJSnhz9R1bhr9hPiBQoYBpw5Qc8VbWOFS+yqM3y3yidwe7Ugu3WY58YBVv1LveAhdQ0VPVrW7zKncQ1UXGEVMwftm9Sd37JHiN4x7xQspsyTxWyRQpbJnek1ALGVN1S9N/8qNk9TKolvXZSa/grcS+AIFXKU1VN7zyhGx/9FeDtqnruDMegNwk6faZBGwXX23cUC5gynKG75PruYTor/wSL+nycY27c9im++LLFBQLTPl3ogt2UyEQl0s8qLa39Zt9RAXJbFkEtq4BrzdMq9HhmTgXf4+xBOItZmvA6aNvUXwm8oRWltVSQNNMk0tGPq1BxBMwAa0z8MwEMg+PRZ1qRw==,iv:lAYYETOobdQCnHGItK02/afJYlKrW0d4OuxSWVJi1Qw=,tag:mAZpmJxDuhqRy4CPuCeJKA==,type:str]
    # API server specific configuration options.
    apiServer:
        image: registry.k8s.io/kube-apiserver:v1.25.8
        certSANs:
            - 10.0.10.10
        disablePodSecurityPolicy: true
        admissionControl: []
        auditPolicy: {}
    # Controller manager server specific configuration options.
    controllerManager:
        image: registry.k8s.io/kube-controller-manager:v1.25.8
    # Kube-proxy server-specific configuration options
    proxy:
        image: registry.k8s.io/kube-proxy:v1.25.8
    # Scheduler server specific configuration options.
    scheduler:
        image: registry.k8s.io/kube-scheduler:v1.25.8
    # Configures cluster member discovery.
    discovery:
        enabled: true
        # Configure registries used for cluster member discovery.
        registries:
            kubernetes:
                disabled: false
    # Etcd specific configuration options.
    etcd:
        image: gcr.io/etcd-development/etcd:v3.5.8
        # The `ca` is the root certificate authority of the PKI.
        ca:
            crt: ENC[AES256_GCM,data:nT72MiWMRERG0aJk6cfuo8nLXvW+jVueCjXpxsB5TKAYZfjm/nBbAGYU8axp3FPYQncip4IK2qgG35eZlr2FH68ongyPyLxlmXrZ0wiUgEa5G++fy5bH6b9xRflUT2ez7xtwqRK4Rfthb8NhB+/eqU4e9CPot+9qWTCa07ySoYFDfz5cuOVvvYjgysHkxfKNHnuQycUyoQCTl5CfGmu5l88PErQkFNV+X0L+ALWsASqYx1tmFt+BYg0ANbNqj0AHCd4o/U94wJWuMrBMUEiVsmHUDNFtxRLNm4nt04vyF08ppPQgy4uZrkiGtIzgJ1q9UJo6SbwvJEzGc9y3FqD7Cj9F5zwN1oRSourQUQNlowQn8lA0ekETfLg73eOshHODXYbGd3iBaCXbvZ9lAXnLZ8fLoKZU5xz4s03EaZVF7/ik5JdIu76H+evPrlnBpreZBqYz5ERXtm4LDp2HScLvSExxKER3i24YxVaHc04WZIdkkWitLptLFgfMQigTBjO164PRfmnIQenkYphKxNm2kVT24QjROusd8b79vCfxjNBjpXZfbbwDhUKQ4tAmbtJNGh4k+BiC0ZqY0XkzEZM64lwzLXzQrSzydZLBNppryVsB0ehQZ2X5q4GX6sLwFNTHYxFSxe7sFV3mvKk2262nztSk7tSeUdOGHczFp85TYeCqif89G5kxjDubMxCWsmL/M1NGHaU65F3ZjtmF9Sln109j+/9l/v9cqFQbZARHWODU1lLQHs6b79UVsZ0Abro1NlZBWzgBeezxdMtzQMMcoCvDYqPNrC/R+84+MotEVXfpXtMxqK/a9CNQAIAy+vSzxWsmzl67zXGtNFC/Bvq+MWtMimpo+smxVZy6SeKsnAZm8SYrJ/A6d58Z3rvGb7XvW8VgUGYe3PWjjUsOX4xM1Gny9joxEbFbf5tDtj4lM7eufy7sWkkCVCIV7vQprzbTsV4QmbbjQuZtSoTu7AVVSZ+U/N8yzbTLIja3q1lB7P3ajrPNr1tSxZErjULJmwR4lGXqTA==,iv:BRwPYvVfqfFDzZkekWwqKJC6NmnvSYrJLq1wultUDVI=,tag:i+hxqlcrB9RgavzMYt4sUg==,type:str]
            key: ENC[AES256_GCM,data:GdpHfB8j8pKqMyH6YebMw7nVQTzZqZHYWGY4A2rb14DM+AgUAXCQVvsDJsIkAR5R9lK40xVUoA3YbmrpBYVtlncYvsK3/NJMySnXRrev/Japu/rACqw0zTL1lSiZBtPPRhkV0SkyjavC8PkOpb+1iZCO10Ur8YtiVbHjC4193ryYC7cLj9sGGMFtNSP/U6UuilJ+Bh443X0q5bnNiI3YgPdoEQ6p0W+/a0keSrg8WvttJYny0fHsefWCYfn7/WWDiTKbdJRR4GUg+Po5+evEqMaXIZ6rt7n+v3gOK6r4xcwE68MGY9E/hj/vbjvRwctmAZmYjN2Y2c+jzAZVMLfvNLJtLeAdNneWqpFg5zJVlhvV+295Xrc4RcuQRYMJR1wP4yxcNr5FBSN8BpBqtQCP2w==,iv:bVbvoNMPoa6RolX7hsgmlEQOLLGRjtHdTXbI01Zh9g4=,tag:79gJ532bkeozKecIyUPC3g==,type:str]
    # Core DNS specific configuration options.
    coreDNS:
        image: docker.io/coredns/coredns:1.10.1
    # A list of urls that point to additional manifests.
    extraManifests:
        - https://raw.githubusercontent.com/alex1989hu/kubelet-serving-cert-approver/main/deploy/standalone-install.yaml
        - https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml
    # A list of inline Kubernetes manifests.
    inlineManifests: []
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1z6la87sppenwcdcr7lqj8amf5e4x7dq9gzr739cwg5ve6vgj0d8s6cahdj
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBzZEdSWENWM2F6RDR6aGtj
            SVZVaEJnbjVFaHhIem54aXZCODhWTjlsbW1NCkI5WDhGQnFoZEpSL0VDMkZCeHNB
            aDA0L0hKSGxtdHZyblhsYmhhaVV3UVkKLS0tIGVha3U3cG5YcWx0K09vVHRzYzBV
            RDRlMGNCZkxwMTN5UGozK0Q5NjFrRjAKa59GjHSJkaPgxJZPbbamRsXRYHX1i9rv
            GcRIAfjShKdrRAcqgDuRmd4KddvN5PRnwAQaVigY1LPLaEFsAq4J9Q==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-06-25T16:29:55Z"
    mac: ENC[AES256_GCM,data:VH0nAkMVG19GUrjqGBd299WdFW2lwsbsGXqPeHEwaet8wGZ9qTpQXdcDslochWQG19g+9l/SfqhxPqTEn/v/vSxaC6SmIT+cpLXqVZ2nS9QXplapGIRoEA5p8ywcp2WiiqPQzxlRDBhAeoi4IUYeft+zQU/OVNMJlqWcnOAI+j8=,iv:rh/7jDKd/WF2/MaNg/KaK98VWzUBiDt1C78B6z5B8OE=,tag:qlz6u8atnS7a+MdODKqF5Q==,type:str]
    pgp: []
    encrypted_regex: ^(id|secret|bootstraptoken|secretboxencryptionsecret|token|ca|crt|key)$
    version: 3.7.3
