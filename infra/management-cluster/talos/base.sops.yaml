# Indicates the schema used to decode the contents.
version: v1alpha1
# Enable verbose logging to the console.
debug: false
# Indicates whether to pull the machine config upon every boot.
persist: true
# Provides machine specific configuration options.
machine:
    # The `token` is used by a machine to join the PKI of the cluster.
    token: ENC[AES256_GCM,data:xTMwUSHyJ1J2LoavNDQtlS/8RHdF0QY=,iv:FAYsx0/6ML/WH8j+WoKxYVAgrdT29xmnGL3GWjzFka4=,tag:F3TbMB0jGR4M6m00rtSi5A==,type:str]
    # The root certificate authority of the PKI.
    ca:
        crt: ENC[AES256_GCM,data:ji+Ysmg+PZWF6BG02s0DJaE2jGb/NpwV+JlpCUbAfzUZZE3w3G28nMvpPwPjmN26u9j3WCEUomxPqn/V7QDnGoLI8FvtdO6Dco70YUKgHV95SR/qWX6DbO4uuaDFL79uuR+P+WjVHjls9snJmkU7e6HOsCJPfPN1PeRtmYhLnZrhd/Uk9ZOUWO3dJUAFaews2VU09OtW1ndLldaIOA++FFCgAZ6ZW8ZmqonIuFPXQhMN3LJ+r5Uh6HessC4+qp80Jc1EGtHJ+Inn4BTuUsbOvd/BU8B2VF1aOb26QFDwjkQxxAb89VODJEHbwexiaIOV+Aj2zY2qSNLAnERdSmFvRUq/mnWYn42YV/rUsKsN8GHBA9Ye/37EDvFVo26MoZUmzhaQkSc39piGa0krPPEp2DLzhUfx3ZfbZmEQfQFG7WjWbhjQow0yt/s1K9Sk+aYnZEAWSMKz0CjvMte8cEehwCrz6dmClp+UxrmhRJFRixduRLSrpzawUlwiWVcobPLmeteYzPgNau16ljGlbp1dIogmzfIGMIC5FGI5lsaLoNFHTae/s8FgtxrlyOM15njXuvt8dIz+V+zh77d2w+xB3xCyeHzNXizo78e3D96xh2c6ZL4fR6sPtRf8xdIEnAUju7pwhYR8zv9TiVlPZ5QHHnsCkHZ6ArrYUylILU13NE4xQdzdYc0FFWplScwBSC0bgR3WE7DpoPfocvCDfaDakhgUQsGPwok0bGJKkLoRyH/741OtDp3QtLOcgTQy9A0ceWFJxLsiv00xyLBmo/zlI9L8ijGYwF2/N0ibV9B99DCWi0nbE1fMxTEkEYOuNb8u5jgJ3sbKbWvh/SA5rSbmkIGcl3sxQtErT+SshdX9La5/RuOd,iv:SqTEfDTyLFqcU9citv+15rLozHHJzNK9qj3mx2sTU6k=,tag:VrqINx4ysyCHavxdaUO+gQ==,type:str]
        key: ENC[AES256_GCM,data:QyOlrZKbWJOyMcVu/LMy/FhHq4Ay/kKyw1B2IoaiQut1jQ35lq3ksHqtjWo1eI1ZLr6wL0fxcRgQTRLKjcBBpkuU/kehZT4zVlpchUnJk/pk+vU9yw4bHrYp9qro9c4r4v3sHMJCyYzFyhugkisrYDH7RbmJ/tYa7XdwbqKquEwIymZ9unqO1bUNkP0ALDZvLYaCUJ5qL+V5hCmW6uGNLWksgyA7IWGFJWjOrUlFf5PUNHg8,iv:raw102tNg/GI3ELIBpmijN6ZOJ0ajAgQccPDhK5u7a8=,tag:2ZZJPwxrdEUbQ2UJY0xCsA==,type:str]
    # Extra certificate subject alternative names for the machine's certificate.
    certSANs: []
    # Used to provide additional options to the kubelet.
    kubelet:
        image: ghcr.io/siderolabs/kubelet:v1.25.8
        defaultRuntimeSeccompProfileEnabled: false
        disableManifestsDirectory: true
    # Provides machine specific network configuration options.
    network:
        interfaces:
            - interface: eth0
              routes:
                - network: 0.0.0.0/0
                  gateway: 10.0.10.1
        # Used to statically set the nameservers for the machine.
        nameservers:
            - 10.0.10.1
        # Allows for extra entries to be added to the `/etc/hosts` file
        extraHostEntries:
            - ip: 10.0.10.11
              aliases:
                - mkc-01
            - ip: 10.0.10.12
              aliases:
                - mkc-02
            - ip: 10.0.10.13
              aliases:
                - mkc-03
    # Used to provide instructions for installations.
    install:
        disk: /dev/sda
        image: ghcr.io/siderolabs/installer:v1.4.2
        # Indicates if a bootloader should be installed.
        bootloader: true
        # Indicates if the installation disk should be wiped at installation time.
        wipe: false
        # # Allows for supplying additional system extension images to install on top of base Talos image.
        # extensions:
        #     - image: ghcr.io/siderolabs/gvisor:20220117.0-v1.0.0 # System extension image.
    # Allows the addition of user specified files.
    files:
        - content: |
            [metrics]
            address = "0.0.0.0:11234"
          permissions: 0
          path: /var/cri/conf.d/metrics.toml
          op: create
    # Used to configure the machine's time settings.
    time:
        disabled: false
        servers:
            - time.cloudflare.com
    # Features describe individual Talos features that can be switched on or off.
    features:
        rbac: true
        stableHostname: true
        apidCheckExtKeyUsage: true
# Provides cluster specific configuration options.
cluster:
    allowSchedulingOnControlPlanes: true
    clusterName: management-cluster
    # Globally unique identifier for this cluster (base64 encoded random 32 bytes).
    id: ENC[AES256_GCM,data:xTpRJTEDFTAh3yfmYjas+rlkhvSTZmn6AIn4ptXhnea4KQoo9tgR3fXf9wY=,iv:l81KD1C4qE+yCCCchfoZK9yyh9iC6ClqA3BfrMFBTus=,tag:FYXiDKZaBFjsgePQwmLzpg==,type:str]
    # Shared secret of cluster (base64 encoded random 32 bytes).
    secret: ENC[AES256_GCM,data:xCsFMekAXX2LKCDxjVvp7/BWh89iAg9eeEeuHjUHVcSfTB+8bMDeJN8OuBI=,iv:3lIVH+EZKpofNUF7Ffdr/HMr41CLuIyzXMiCX/PpsPM=,tag:7BmbC6Z+g/MgbQNkuESJGQ==,type:str]
    # Provides control plane specific configuration options.
    controlPlane:
        # Endpoint is the canonical controlplane endpoint, which can be an IP address or a DNS hostname.
        endpoint: https://10.0.10.10:6443
    # Provides cluster specific network configuration options.
    network:
        cni:
            name: custom
            urls:
                - https://raw.githubusercontent.com/projectcalico/calico/v3.25.1/manifests/calico.yaml
        # The domain used by Kubernetes DNS.
        dnsDomain: cluster.local
        podSubnets:
            - 10.244.0.0/16
        serviceSubnets:
            - 10.96.0.0/12
    # The [bootstrap token](https://kubernetes.io/docs/reference/access-authn-authz/bootstrap-tokens/) used to join the cluster.
    token: ENC[AES256_GCM,data:gE9DdA+/K6FCnkKStixUc9svJ3DAjRI=,iv:XkVliwVNSJqlkAZ/gnqiMg90kJOm8ysBlxDDXXixqAs=,tag:3dToWfMDZgrEvn8RNeClOA==,type:str]
    # A key used for the [encryption of secret data at rest](https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/).
    secretboxEncryptionSecret: PZ09M5ZzWPWXxhCW1lpyIZI79tAS51zrtQFD6bUirUo=
    # The base64 encoded root certificate authority used by Kubernetes.
    ca:
        crt: ENC[AES256_GCM,data:m8MKC4udXFztBhdAyKZbOjxOReXAQnQ1Iztk9dA4g1wUHdglewbKFlL+ZjeTsyzkY+WYKAzTBEdy4XX1HiCW4Tx22+JM6V87Y7ApqhDjSOOGkfxcYsJVaaVflbA9jZxSU5QnIHL5eQ2Bht/sfF251k+LS5dQmnkUZRg+xb18zdHufi6Iy4qHTM7APZlhPJJmT+vZ4U4ouc/RTJHp2dV1Y7MznkkfPgte7oeW/vzhkBLDSjA9VMPTAUPI7If/aWzaz8ZJ/YQQBqW6tYIp6LRLxjA2VbV9pjL8UYt+ifXNV+jlmllRm6hLhJZRLiAjcmaFMRtfqWsszx+dpuT7kVYs08qHGzD0T1mvLWuYLyAA7VNfb59WNo6KTY1dlY9kDoEVpG/ykFzjjYzoMIV6+jQ+w6jYwHw47L3ZGs6DLnkhOVJ4RSuQCj+z9E7bCQSHAQDzP8r8cOPTURC1EkWNPS1n5g9yordUofzCk4svvi/qwLQ8pVek1eYkopicXAZi55s2KGhPGljLf+DiRaG9Mwb/KO+9fB5kihzFhuia962kq9X/3MDnNt7FNcbs6Zh8ocjs7q6c1y4QAf+fq/X9V+gyHWNIFI1kB27Kzuywh1pFrzZLoik4Wni204QbGrRq7sbK5kOl4kkGONaQkjH20jzk+HkftMI6x7HyVIVRzuBkxWyKKs2NiEiDEVGYSFgZkewlEgJif2+MBst5TVDe1fcQgj9OjqE3VO/kDZ66sqZyjPeBB0RkCMBM1dXNiJJsUwAQtgTuwSUPGoJ0qAp3aCP5vVErTJklSlUPKB3Qeitga7t8X45YzaIj/VCl2TcUpGvihHjcW5GhXhvQeeFgQ5MGS3umnHKSAxTCh4ROQdQ52Ef2pJdz1CHBrJsEyWDm6OBBAYeAQqXgkgNyPdkrpdXZlrAvhF7OeEkYg33RjNfrdN5yiGGy10cV0VqmFrmK7Gl2dReszk4+N6c0w23HOrWMAZk8DqFcZTc4rszhdcYcwNvYJJZa5dOUB7OIUlbL/jkOQkhHQ6g25I4SmGgrxwgOsrOQ1E4649pelfzYUQ==,iv:6tOwkzDu2rGpiHcAgzUnzQQEH054aLgx3JHhRy0YTwc=,tag:OQ+OLMiFoo+06ntCnXareA==,type:str]
        key: ENC[AES256_GCM,data:p4zEW9Qv0ZRf/yL2MjP/bYCzMIA7tc5kxPkQC4QDPQORhuMYI1vhQ94cmDh1h3AoJ3rEOhHWkCNiaObTH2dr1f0ULUmqKrwiJ9yh0n3E0umz3fw2LJAKKmamPBmBD4R3ha0kvsms/5MeFEmtWmrMNtLLR+MX3Cy5VQU15dNgnTC3MaWJOmJFpfo9YCPNejxIbeBs6O5FXBiwnAXU+d32UmGPYtq8h3Y/JEOyEA2D+juVGBznVx+i5M34cIKJPUT1wNtC2prV3o1Q2p4Fv4IrDoFeNCaTCCHs3y4Za6A37E/+GpDPWISzyXN2mIz+s7bzfXS2/xa3YacG4NcXPHGBiU8G96yO37pdT37DA9M7XGOf1ICawjsQRedL1w5aWT9n5PW25OLNDSQJ6rv8+tnh+g==,iv:TNjfzQObiJ6vDau3NQ+Pj/KolxBK92JHc2FfYfbnQU4=,tag:t8pJEa8H+aaDJVX2nIjAUw==,type:str]
    # The base64 encoded aggregator certificate authority used by Kubernetes for front-proxy certificate generation.
    aggregatorCA:
        crt: ENC[AES256_GCM,data:V7c6Z8T38o+RQ3c2Tpg6F1mVs5Xru8wwb+NRwx8eMKj/7KcR9x2lDbHSnlF9Cf1ufqC90Nk2lxNL3NxDZTkxcjdXVHjUelHhlaBzrypxsDSKNcbEBfcxVEAZmxkxSNmc7sUxv/j4Wk2VsJO6cbr1BA65TpZI7W39LD2zRHvm2vRgyMgKovCDAYyt50i6O1cf1bK37lJ6kSBaLzTubn8QPnqp/QZjBeCVNhnZSpQmY5agaH36pEpwvp6pKe1o1T1oK6CXFp/syA7+PvzyF8jrW1xbeEzPGuUJjIAa0FQkVa2Dw7RWmYOcHy9mN9KfKcdn4SLyBslZA7Qo7BW86125+yA/+tCNRJrkWEcVpDuF75xI+LGHF9gJMJfjI0PaVK6unnYiRzKflt67dJyHvzIP1KOGPW/Ta7NKKQwrQxQTpAIMGD0vdl0FiIHSnDGyywm2le1RNFnFuT/Mtm4vzxxmXCdPqQ428N/xx5SEM8uui13Qlqaj2NqYq2h2/UWHtj8QeF+4CCfEgW1pJ559uuWfgX+J1ed4noK0tpZnzPRtwpQ2kpT92lu/Srs4nUxrA3OJ29PNXoBMyzPR6vYUtlr/iT3FOfeCIbtaSjqDX3P4tODPhXGg1sijyBnN+izXBJtK3yUaUt+ig2gleuKK5DB/wTA9uEch1GqQ7Z6zHGeTxMX3qqtZC7TUnzidsm4os/EtxRxXB3o6+Qq8iXo5AjMyHSZovw6Op7K9lx/q/z404dkh/MNKZHOG+wIvuZCTOOxUELBLXZDJvaWxx9tmcCthcgqt5T3U6wkw/0LVplZDNHwWWiBN7KG2rsng31zaLJDyOnxEPh4VEATqvSzIqLaSzp29huCIvEZEFwAHY5wrhlIVWM5wrfbV69GhpwTm5EYS7yIr6M1qKhk+O6kBw6MsBTUm2JcTPkhM7i6JU6yxbOt/+eUl7o9zuW8TWKBG5FSI,iv:iBbflK61aCCdxAOlCpUa/edRap6il0T7jq+vAwvxyqI=,tag:dGYGBXWnYNbP2pczqPOqdQ==,type:str]
        key: ENC[AES256_GCM,data:cW7r50qVhUMarXpqG9Fv+gDuDZxgMdis3u0iuF776YV7mA5c1teUmsaF1jBoux3QMtNllRvEZRPFE8G2YhAZMVx11muA3Y7b+S+aCmYPSy+YsqDX9IAZSSLI5hKCWWqNY1vT2z8iwR6Qys6/TyuslnBGJ9PmlSS93pZDGnpr5W9okOs0DDoGDBJ8E+/tlBxM1WPsoSkElm/cNZIIELgWpoYMMaw2+L1pVX42cgprICk6nhbnda2tjvPqqWFUkJRttaQp1WLzbj2oAoXwKZycHzKYvluMGv9axl9VyFQf47nR7Hu65ADA4jo6b4qOHYw9O3h2m/0CzwEhW0peCjp2OTjBirmK5keksmFUZjF4tB6rtjIwvQ9uePkG4nV8ZlmUIv30FmEcVsHdLcNIyNpRIQ==,iv:s3KxvUE3Dpm3yqqz6ZypzfIJtTftsD70RYeDs+pmqx0=,tag:kL6sLCbpJcXbRvDpVLCQ/Q==,type:str]
    # The base64 encoded private key for service account token generation.
    serviceAccount:
        key: ENC[AES256_GCM,data:tP0GrnGpo9ux/FYtS8ozv/EttZFI6rreGNIvMHcc7yvjYUSvYjMcPa44m4UFUDUmmIRIjJR5yt1jvWCpCyN8/mOWS54p2SfRk2DTLNuGuiu7jDXO7rH4+nTDDKIltspT7Vn8iPr7geU2PFJUSbJEXn8olvSNFhU39+F12t7F6AKRbWK0EXkiGXNZDNbKDBd1ek3weg9R149v83HywGNChYo1fs834IEhRQJy9PtUwcQCk8+4A1AwB/AoDZ8qOQTLS0mNDw6uQ9PAEhqTC7DxD9raS2o+jr4Y49S3zwnYyKkcrrb4UgYWDTQBnAc2mgwZPsB4LYtXdrcR31jYxIGfOccXvl+FjoSTCTpHny666RGs4mcra54DNxAE+vUFusrW/aoQmjMqL6cvyj1429pMYQ==,iv:ElJapFG67d4caBZVFUyWmkcd33+GZSw9OPPuCmUJuN4=,tag:FBffhXofSPPC5bhgjVaU3w==,type:str]
    # API server specific configuration options.
    apiServer:
        image: registry.k8s.io/kube-apiserver:v1.25.8
        certSANs:
            - 10.0.10.10
        disablePodSecurityPolicy: true
        admissionControl: []
        auditPolicy: {}
    # Controller manager server specific configuration options.
    controllerManager:
        image: registry.k8s.io/kube-controller-manager:v1.25.8
    # Kube-proxy server-specific configuration options
    proxy:
        image: registry.k8s.io/kube-proxy:v1.25.8
    # Scheduler server specific configuration options.
    scheduler:
        image: registry.k8s.io/kube-scheduler:v1.25.8
    # Configures cluster member discovery.
    discovery:
        enabled: true
        # Configure registries used for cluster member discovery.
        registries:
            kubernetes:
                disabled: false
    # Etcd specific configuration options.
    etcd:
        image: gcr.io/etcd-development/etcd:v3.5.8
        # The `ca` is the root certificate authority of the PKI.
        ca:
            crt: ENC[AES256_GCM,data:111+PweeyMzvscVx7RmKPffONWkgN+HVJUHwo+8+wzHMDSgqQlzWCo85qboqSd6ehbhy4X8NdSNrYu/Rvz1qQau1HaCuklLJJCoRjk/b94dM2G9PD6qNM+lg3iqfF1BuJAvNtLMDxUQqawyy+h/IK63WZzM/4jA12VkAsuiLT7ZNRrBXGRNxOMwNzQFJTcXtgGeQ0QGxam7aL40FW0gIySdziacWRlpcFXqBU+t4uXxr8jjNR774ezfqVWSA5Vo+jM+H8h1zom/k9fJ5Ww6qz1AOHvWmW5eIoUeuoxc0fdPUH7q/og9XU0tpysRRqcpV+S+fD0ovkA4BptTv74gHTuG+z4jZgFz05UBVt4n+0R4OpSp0fHAZ7UyEUxCEszB0EWbPpMIBcqBwMoQX4VUFKTVJDlWFCsLhku9UuPAGJITYQ5k6L/Xx28VBWTITbCZPa3bGa4epjpfrH/lbqzogOdCEsQ6NSFqjDzVtL2whSK7Em6b/TrGdcick6CImMo7pFiG7pqx5lAGKz15O0xO+zcUkxtspvYW8dKzPh6vC247bJFMyg7IYuF8NdLFqn+g0JAsB4ixGt5ikWgqtLOq9RIdjiFU25Rt8nBmrskdE3fujyRNtimi02HB4LuWmnYcLnT5yD1EbafvIXj/pfYPOs1VRSLw2dNH6OSPOZGXFip/TLmTZF4/Kk1ILGXx1UMene0Ztg2Cz1B2IiSoXzTcqi+bse5HgBPsPzyVX6jta1mdLO25eck3iTRvaWO10mdIxznm+7kxccGMOY4gvKwJpPbG3P8lHdc5Zeo3MdYiMmVD7JVtMk4vYOivf6CEQkpZaRtJ5Shvirvqq0oPKIG8Ir9Vi9nimR04ghWMgrevExFhR1jzrOZqgrk+Eox8T7BqY+n0xL88cMjNCj5VuopOG/fZ6dAa4hA2jGNjYpl+K0cf2X8gCapUFUHQI9mSmriKd2TJs3W4SgYKi7/bBnOQRc1dfDUV39NNY3PpgDobvenVubVx7pL94zudtQ0VguIKEJtlUWQ==,iv:YEbtUrKy9oOf2eg86PcoTl2Xw5y3tnCPdj8NOWB1Y9Q=,tag:RwFJjCGsvMPCndvZH3jQNw==,type:str]
            key: ENC[AES256_GCM,data:uMLF5GklO2axX7KFAczHVnt0JRkqZ9jA310g4EyKwcy1KeISIBypdjIf+FIqR2BH4I7UdwcowK5jyzvnVANILbq8mzUQdCRcVG2OlJ4L/ki3h5X2v7rPSJGSZ3wYeKXfgXGCpFsrFRZcksqd7bnzoMPlEiZNAfMmZQA6RzoOWSBZjaa4OnxuZRXCYDTvcYUJhWQFnqT+28oxXUlkL0JWc/9vfqXc7kIrzBoYVVH/pZ54Dn3nCCduBgArGM6MnArRuZ/tAHd78WunAIyHnPvxzerd9k01sUfg6wit6B3WRl3WRqWhT+TPy2UvJ1lTrQWakLeUp6ISm+13oR4FSuq6Q1TXReLxBDdIdktQtiuzVtDm5qsrBOOqMo8wmVuNj5A5FQXAyhpgBsF8+OoOGn0B0Q==,iv:oT+rN1G/fDQMDMGjZXzJfTSJ5NOiDXhMZz0LnigvKnk=,tag:Zv9uhdRxYXNKpr/eq2bYAw==,type:str]
    # Core DNS specific configuration options.
    coreDNS:
        image: docker.io/coredns/coredns:1.10.1
    # A list of urls that point to additional manifests.
    extraManifests: []
    # A list of inline Kubernetes manifests.
    inlineManifests: []
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1z6la87sppenwcdcr7lqj8amf5e4x7dq9gzr739cwg5ve6vgj0d8s6cahdj
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSAxTVdqQjJPK0VHbHNnRk9G
            Tmh1ZG1RdXhSaHJMZU5aWmhaVDBmbU1rRWxFCno2dGpFOUIwbmJPRFdpMDZIZlp5
            SHZKUmFFUzRxdTIvcThiVXRBZGVUOG8KLS0tIGtxWlkrd1ZTVjUzUm1wSENaVzdB
            dVhWNDl6SmtnczBWVXFLN2NyZmJtL0EKEqm4jeGZ0ad+faDz9/dx5eghgUnlhyV5
            /ahPCunYx4qpy8AbV56V6WcO5zxRI9tGFoeYTmhWeBffHF6+tJBffw==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-05-16T11:19:56Z"
    mac: ENC[AES256_GCM,data:TqFJS+cbe5BT+8dF2739YkGYs9sxb3tW1z7MWQeHR2fCMR5jrHAXZLAQX9pd37mEByZhznyDW6ZYjEjAdgI0mzzEcU+1byx3KUsrTqqKkmvO9YEaP5y40v/5u+QGNq4nepIsVwNHH6evm7OMGys+SHhRAPomWqU1Ts0C0kAI4So=,iv:e9hqoA3zCPk6Y/NmMZRdrgwdhpaYFzaJbtva/EhXQAA=,tag://k1/ZLG+2Pxj7eUyXms+w==,type:str]
    pgp: []
    encrypted_regex: ^(id|secret|bootstraptoken|secretboxencryptionsecret|token|ca|crt|key)$
    version: 3.7.3
