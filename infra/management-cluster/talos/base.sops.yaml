# Indicates the schema used to decode the contents.
version: v1alpha1
# Enable verbose logging to the console.
debug: false
# Indicates whether to pull the machine config upon every boot.
persist: true
# Provides machine specific configuration options.
machine:
    # The `token` is used by a machine to join the PKI of the cluster.
    token: ENC[AES256_GCM,data:L9/hiJTqpLhEIkWHdbz4Eh+UIZH4gKM=,iv:/lb5kBbvHSH1lqdSqGXEyp0WYPZqVnGowdeSDNqxHwQ=,tag:OEAOi11cll0jSEPNs6ZZuw==,type:str]
    # The root certificate authority of the PKI.
    ca:
        crt: ENC[AES256_GCM,data:v7XJmoT3ld+GLS8ESJP4QdHu1gGUPcJzZe8UUEgUsWubKTS/gr/nRABEFOElFHzz5CfJYZKd78AixT1osAba2eohJ8bs6CNMzTDMlXA3iiZYBL/msSmeHgnrtm84yReHbI8zWA19sSGaSI/kyuhv/WG6kV3ZEe+rNXqSzO3XXJ5qY4ANwhe6nMIj+0NNIHIormsfS0EhrnV1dEG0bjhNwTr73yijmyBK9LpKDvwLkkZdppJ8xrbcXlDSV4QNoYQ2gxxaQhroilxu5md9BAur5Yh6udBVWAS2BXsc5sxIrMD+S3VH+qDZoPc18A8V5oTltEvF1lFJuJSjC85cBarKoT+VktFX6dP8ONmMtz045URuQEDskFCpkfVIC0Hjo4ei0FPZXrN60BHdX5XyvpVdNAf4/PBIhI+ymGBi90XQ9euXzXbNYBdeFNVw/j85FV8z5fgkj+fYVlFT47sNDxPBvhWI7U6ODqatwHMAUd3zuERtWU6j4bzsWrzEAFLIi5BAIkImN29aEvgzvXNR81g8F+jGczQy75onkRd0y6og2rEPl4rbVQqEb85hUniSernv3LTrGETqq6uajnnV/GxEdEQR6+21NOptQL0abygRTy9WCypD4OF3UTNRO77EPRPUljaKydUTFWvPX5iH4PR2RGASID8Rx7fYVN5zWzKl1/uNrGir3tvXZ5OPO252zN8IGQRGVRYUunQqcBLSkuOPspKzp4ESmdqPLw9/d2qr0AALEFdZDz3H15soRsOkYZhKvlHKnZKJjyaj2AbVhKxVQLypDcJRyBq+lB79SQtAmpuoNFvLhN+RgOc+iNq8TyeTCcBpb1BQJIIbNw5Cdtx9Mx61jATGAocSZAqb4Pfg6PJc/YB6,iv:jT1mxsCTPASNCvFmFMlm2UmNVVHZ2292lppnNguQWFA=,tag:cWvCh14cPSwjmrZPoVLmlg==,type:str]
        key: ENC[AES256_GCM,data:7Gz/F82V2DlZO9II2h6IEYAoD3X79tIBEyteNdwXAMfTY6qAzsF+MVwWrt2PgqaN2XNEWbrE0j0se9BG2VUk0YGrq23uHqZr1mX21R+zYL4XCN6ZQ47hfL8EOd0CY/2qR3pQpdbJ/MCDQEyWmyEv3PwZS4QEYu+n/RKbGTbhzlfActtCWyaQUGgRh03Jvcw+nBEaeXGqKErCjn4D881HfDp2aHWMYiSd/luw973u11rlBapa,iv:RoJ1splpXDHeNICklt8zz/3Vwa2HAoubYQxeUv5kQ1I=,tag:WxoMpnu9qeKzXcX5KAJidw==,type:str]
    # Extra certificate subject alternative names for the machine's certificate.
    certSANs: []
    # Used to provide additional options to the kubelet.
    kubelet:
        # The `image` field is an optional reference to an alternative kubelet image.
        image: ghcr.io/siderolabs/kubelet:v1.25.8
        # Enable container runtime default Seccomp profile.
        defaultRuntimeSeccompProfileEnabled: false
        # The `disableManifestsDirectory` field configures the kubelet to get static pod manifests from the /etc/kubernetes/manifests directory.
        disableManifestsDirectory: true
    # Provides machine specific network configuration options.
    network:
        interfaces:
            - interface: eth0
              routes:
                - network: 0.0.0.0/0
                  gateway: 10.0.10.1
        # Used to statically set the nameservers for the machine.
        nameservers:
            - 10.0.10.1
        # Allows for extra entries to be added to the `/etc/hosts` file
        extraHostEntries:
            - ip: 10.0.10.11
              aliases:
                - blackpi
            - ip: 10.0.10.16
              aliases:
                - deadpi
            - ip: 10.0.10.17
              aliases:
                - thorpi
            - ip: 10.0.10.18
              aliases:
                - mariopi
    # Used to provide instructions for installations.
    install:
        disk: /dev/sda
        image: ghcr.io/siderolabs/installer:v1.4.2
        bootloader: true
        wipe: false
        extensions:
            - image: ghcr.io/siderolabs/iscsi-tools:v0.1.4
    # Used to configure the machine's container image registry mirrors.
    registries: {}
    # Features describe individual Talos features that can be switched on or off.
    features:
        rbac: true
        stableHostname: true
        apidCheckExtKeyUsage: true
    # Allows the addition of user specified files.
    files:
        - content: |
            [metrics]
            address = "0.0.0.0:11234"
          permissions: 0
          path: /var/cri/conf.d/metrics.toml
          op: create
    # Used to configure the machine's time settings.
    time:
        disabled: false
        servers:
            - time.cloudflare.com
# Provides cluster specific configuration options.
cluster:
    # Globally unique identifier for this cluster (base64 encoded random 32 bytes).
    id: ENC[AES256_GCM,data:sYac/WKXEAYtwOK4ES8qmQxkE8v1MEPoLU7v8JwSfIaLDfrN5ZgKcT+fmZs=,iv:WbT/e8oBpvqrCpzjclhLn8a02frtu36/1Fs65oxwHSo=,tag:qCBb2LZB/BPBA4VSdYkJAA==,type:str]
    # Shared secret of cluster (base64 encoded random 32 bytes).
    secret: ENC[AES256_GCM,data:bfSRs+ZwatbbI/teK+D1W0edrmbcDtIr6Z6gGByhDIxP6+4uZVzSxb3ssaA=,iv:u+lYSbAJpZfptqs0fhYuAieqreKPvQ+XYRw2+0eOiPw=,tag:sZ1OJoeNqybQc8IHZZ/A8g==,type:str]
    # Provides control plane specific configuration options.
    controlPlane:
        # Endpoint is the canonical controlplane endpoint, which can be an IP address or a DNS hostname.
        endpoint: https://10.0.10.10:6443
    # Configures the cluster's name.
    clusterName: management-cluster
    # Provides cluster specific network configuration options.
    network:
        # The domain used by Kubernetes DNS.
        dnsDomain: cluster.local
        # The pod subnet CIDR.
        podSubnets:
            - 10.244.0.0/16
        # The service subnet CIDR.
        serviceSubnets:
            - 10.96.0.0/12
        # The CNI used.
        cni:
            name: none
    # The [bootstrap token](https://kubernetes.io/docs/reference/access-authn-authz/bootstrap-tokens/) used to join the cluster.
    token: ENC[AES256_GCM,data:L3IL3FYSW6qMt7JpbDcCkyCVFpghv7Y=,iv:JkLeHGAOw48chqiWf1bBZ9+qucQtEbx6ub4Y+4CSEnI=,tag:6T6WM5d3fSh8oh7ydxaH0A==,type:str]
    # A key used for the [encryption of secret data at rest](https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/).
    secretboxEncryptionSecret: QbaXvzwx3zjKDE0lnapGB69ma69dx+seaHG6hohcAYs=
    # The base64 encoded root certificate authority used by Kubernetes.
    ca:
        crt: ENC[AES256_GCM,data:yaSwFG7v+zNeYa9pKxgI0LHx0Hpq3J2GRWkO/8vIgvvWCHVPt6tuJTYT/OtHAm2dk5QaBVTvrOxL6Fiwu8Da9AbC8n+apHUO3jVLtWPOlX4dlIIv5bRJ4KU93OAtozZ+HWVA0v2RRzv31D7RE7lHeFPnn3cYOS0yqWox1S64ZGVsKkQb6up3dL30A13isPF3DWkw1BEr5Q71dwsK0xdvXa312zQrULDVVHdxdymbgaAw7cWpup+/H+kRkhHPKGQSDn6ORNXu6bh2b2MH9aO6oFyNIxboj5s7wtYvk1sPRNkCLzKkHrP1GAVh8nl1nIG+l+RPFezfNMSRIuJ+zxVPq45j+YMM30wJGc8+nFnBmDQtxDM+CtLsUiGFe2qmn7qUhVnyArRNAk0JE6UV0cHjKiDhsGkHRCAzFzdjtHUNcyETZjMUTCGm9rhETIsiiW3hMh664wQvJqgo9Pr+2p7qRmk0UEH7PtRZb88fwIdzCn6ymu6IZ6dHiejLkY9XRdY2W8/3s0BK0RZopriHgNbfB6bHq94Nv+H9vfoWyKJzlIfmWd6xYA4aDq6cDUvCDd57Xl3WWNpBrTkksUmPMOQnryMIQNC2D4nMDroC9Q+iiPsvHeoLOBUir1HtZQypEgJ/DJeucAWePCMNzIzcdLvbXnXjDIkcrNG1x8FyvyPLqgb3QJ4M9DxWSzeoOLBgAi5lF4XoR+mSUvsR8s1473JE2D9uvZTcnrmd0rcIUx4QtbGragSLbw97XbiwJ1lv7MQUb7GXn38tDgyBHanddLsJ5J/96hYTbwuUlsRJ5jCZK4ULxvLfc9uO9QUPmwBpzJS0TOlOiMrAhF8fLROZSknKcfV8GBYAFvmZq9nV6vW2H99TE51NBUEQg4NijPOI+2TSioaOfP3PwI0hUIUFcdd5uNnU8sEb4qHrmT99h/9+f83NuevR3YUG3JH1gj0xLa/AAqMYqVPQq3k9fGyGOCP/T91hIN3cVbAeR8gG7WOSggobb7CMI7FBjLv9CpXd2e07oi5i4DeoE0nf7FiIOAOAqljMWLT7Nya5qD8GxA==,iv:kVbt9OVhOdL2RmMOtdUmvkypJxeQ1Lt4ES4lyPmtOJ4=,tag:WNNnx1U8ZbB0/MzwLGE7QQ==,type:str]
        key: ENC[AES256_GCM,data:334T5jRZuGaaRbOQVFzLiTICHSlw5rjdxt6gjVavnSBENgZ5UIsnG4ysFUpBN9vyVdED5RxEGbVmF+DVLFCR+d7Ik2PpCCsGYTGwzJtaybYQFNuyapIygKWwJTfjc1pQJa8PCakjROk9MK9XjNlljGJwMPFyOmAkXTbdvT3FDb39z0hyvV4f2VI1xJuBvWqoL79usXwCi/UQICTAp9qXssmkjUYVTxK5J+Jm8D5BCA5p6rK/JI03Tp0Obh3B4IaMpXktKym1xJ0GmwNRFj0vvKxIVQb+vGFxWkCUCZaT9s9TQ8szfgGwcwo2PQ90kfByz+HKzoEtpHCrO2b/z3NIKdv6ey46lBQlQUbV+LXhn1Os5I3pJhrAqDwvcwEZZnBuhqE8oQdmkO6sTIvTBQiOVw==,iv:1KZRRohxybd4CHdsDdkwCWtp9ZobhyziI6zSMrkh1bg=,tag:LWCmlageESPtslJVFWBX8Q==,type:str]
    # The base64 encoded aggregator certificate authority used by Kubernetes for front-proxy certificate generation.
    aggregatorCA:
        crt: ENC[AES256_GCM,data:+ucg8RtoJLCgP61BH2uJ1U/v0sO2QMqFQEh7WxJFT9MOFX5Izu+eOz+4ADpPGV8MNWSBNloW42EpxLCsp/cJv21HzcRIJ31/BghzMC7s1TRWCjgKtNI52knlpmXuIFNKtwwNQbRV80WfEtTv8MMi1vskAZmUDmEtHXgW1hOXp/nOP5NSW6KJs79qo8Ij5zIae8ZWHu8KXLzBiEVDdW/fseOaQufry2yn+CIijzGeB0VoftHRGrKFAIYX4KBYXyP32PL7FY/oLSvbjJzQM8SO7gO9cE50tbQh+p2Wy+AjCZAldBDVtQuV+OBGtRhKS7ejMAAydJduCTnQiFIAv1JJy0Zxs3pt+yW9WOwwcStlWSgHcSDu4+2051wmfU8oBIzCDXBUL6gwp5fwWab3zsKH4BA4bchoV5nHApXur3dIs38BJjbnH1ILwotvo2mFoatUTJ1aWQstg637kC41C7nQlPGbPP5zD0Kp1tlA2wLagdfdRnVN6e6QqPVnz3BXOhS3FZ59rNYqpUdIFrdy8lGSVPYoYO9mNP7fzTLjzFZo8ow20JH36hQzXJlhN8EKRXZS1YaxmDSDR/NK83p4F3yiAdFBFrji/wy1R1u6HUdqemEYS3iXFHKIRUwghLmH+DEG2w0Uc9//VB9Broz98mF0CgqwPLBQISc59W+DUdNJPg0JBtA/05IgAXQUGfsbz8P/J+ybcS9OacfKl5vKVjeFwH1jlJyM/pWbWAejWSOmaC/micEl95ujk0EH7LvVCVJLKmYfxvdPQ9fzbU66exvUt2uxvSNHnbznuuLSz/B09I1SZOSUwtcY+i3GrS+JJCbgJqY4mFtVwnxcXgkUijrvMfnSfrhQVsTiq/n629v6vAlvJsilhbGGWv7Du9oHQFL2GaeefhpX3azRViMnpdqYske8lcbkCXflV1DpqI/rHeC5F4U8IuLeFb7hS1YT+Dzj,iv:/S+VSosf4XIhpfnaDBz1g0yQTSWpGOkzt+oBzEclxuA=,tag:PVZuSgZmjEi5ERw3zFnOhw==,type:str]
        key: ENC[AES256_GCM,data:aNb1TGValW3wX2ZVSLyn+CVIOh6NV5f/uKZuaAg1//PXZSLVO5XOH4McTz3k9no4IRd6mKEwGSANsbjEIX6pCBWSx+HQl+wIiHhTCkYlCpWcZTXPJ9YXSlFPdViBSl6/YuatNbTnmkCqgWTXKItQG4L5mep11BwmwmQyI70pGF+Oq20Ygi2Kqio3jJYZfheAy35B7gJqsSyYGFupDzQyqxQ8lA+LN9LL3T0x/mIISzU+rsmxgEkRu7beJvnADbvNi3X3C0h/4juTBNsHI0AyxL8RbWicL0uKfqty9Ueo1W12QGUV7FyGuAZqwOzdx8A28vqGjfS2pYemm8yDswggYrZIRGkBi3pYineUmJve3IKZzSksGP3JeU7f6PMljTGXGLYYOH5oBe7cviVGgLidpA==,iv:2jyxK2aPECTqlDlxmma+9ZXwAKh/f1BJ5+zrBv21xgI=,tag:26dKWW8GnJRgmyYUjAWvlA==,type:str]
    # The base64 encoded private key for service account token generation.
    serviceAccount:
        key: ENC[AES256_GCM,data:7jwmr4U0Asdba0av474bDBmmwqQsLX9zYOwrXe+m+F5SamtI20rykvTN5+k/c+g1ughbTxaNoVljgcLfWtYSKCo9jPVAe9aW8q5NK8YuA4qYKKIFG1FPvOp4zzPdpn9fZl8TANCVB0yXBVuJUmBsg4NcAurV9b4N9OvINGSndUitNHaYPeJRehXOu1XxuNvY6Yc1pezT3LPpgH1VT2kXS23jpMhIVYgEgZcHc5lIo++OutBjHwpOPEx8SIZm216czxnofcjd7vS3AI1h+lrmBMnnUKezbnKOPOwSlQxOTWrXWPmJ5MieP5IL00DNYKTIDmQkhUFGma+k03UHgeoisFf2J7x9TArNESTDibE14yiwIaSODRWCYnEjrNN11j/LUE3hg4tBVJvDgZX6bX4X8w==,iv:4j8fbFDAVftr29yc/+B+NNkMXzpjN0glINrEwN7+MB8=,tag:6/q8f2lHddYt3LzDvpYzNg==,type:str]
    # API server specific configuration options.
    apiServer:
        # The container image used in the API server manifest.
        image: registry.k8s.io/kube-apiserver:v1.25.8
        # Extra certificate subject alternative names for the API server's certificate.
        certSANs:
            - 10.0.10.10
        # Disable PodSecurityPolicy in the API server and default manifests.
        disablePodSecurityPolicy: true
        # Configure the API server admission plugins.
        admissionControl: []
        # Configure the API server audit policy.
        auditPolicy: {}
    # Controller manager server specific configuration options.
    controllerManager:
        # The container image used in the controller manager manifest.
        image: registry.k8s.io/kube-controller-manager:v1.25.8
    # Kube-proxy server-specific configuration options
    proxy:
        # The container image used in the kube-proxy manifest.
        image: registry.k8s.io/kube-proxy:v1.25.8
        # # Disable kube-proxy deployment on cluster bootstrap.
        # disabled: false
    # Scheduler server specific configuration options.
    scheduler:
        # The container image used in the scheduler manifest.
        image: registry.k8s.io/kube-scheduler:v1.25.8
    # Configures cluster member discovery.
    discovery:
        # Enable the cluster membership discovery feature.
        enabled: true
        # Configure registries used for cluster member discovery.
        registries:
            # Kubernetes registry uses Kubernetes API server to discover cluster members and stores additional information
            kubernetes:
                disabled: false
            # Service registry is using an external service to push and pull information about cluster members.
            service: {}
    # Etcd specific configuration options.
    etcd:
        image: gcr.io/etcd-development/etcd:v3.5.8
        # The `ca` is the root certificate authority of the PKI.
        ca:
            crt: ENC[AES256_GCM,data:qW0ZgJlX2hCEguYFe+5195ACOQJhEqzZI0ln9BeF+uOmohA3iF/Dr4wwZThQcvHFSkQ7M+aYy9oVeSqRDkINr7sQR8dfzi8u0SyGRVv8VbpGc9bMotBtWBk2HSWanWEOt7WKTESKk9eqFRWlZ1E5q2oxLGYOe6DagFZl5wzM10Zs43w3tejD3yOrKp2CO6XCIcDD7BjbNQy4v2zEItx1+p+auXcBanR2nZ78p6JQy94w5Y2NLqJIhKJ4wKxH0x6qQ4V4XZkYAVYTa0N9pwaSqLQNe+GcM8AWxZzcKT5Fo9C4Q9nXc1iExUcI9Yc8OHhyuc3tJ/L+fzh87SFyzWE+vWxfdGU72LS46hHqW70riPYk2cd6CeOZwnBMeO1KkuvMTejbaSEhAX9zx2U5kzX8kiYc3+0QSn3qs5YPX9KfZ24+qeepD4iRkoAf4dEfIBJTC7JHr/RYAmZf9Ep7BjIHXDbErrhVO0PCE53lOk/kzCgX2xuG7eQtuBcUAv7f4DvVzCYQoHFvgBQm6u22o0FkK9KbMQtQsbiZJnGkhWq3cbhvtBG/mokXJRTWRz2Q9adq2jRDlM+5YrV8XpGn3Fqu/LbCzEUcT/EpT/AJwqoC7W2Gwx4F/XNyiFuwVSoXOAPCgajtemiOv2y/buFLAK7NvGskYY1ynf7xHKLeKmVMZdn/zBKmAJGZ6HPGg7lFdp5hAYQBlrW/6ordayCgb0YMD904mbZetgRdFjkk2mcUOFz0hT/CVfqOZObFTTHd5d969yZ2Kk6wjC8PDdxE6YBTLDUyHBv4cKmVABjXzIHv4wVchNZjuoyZX3MRDjUsQPN9r+ceO2blGrhpPXHQUIUvP4q1YxCFFggYF+b3bmJbxrwcm7bJtnruoUUx65mk5Vd8UXMqW+me1qV/5WDq8wXIoI5aXKFya96+VNi6qA4PAQVYQvzKugIo13xp/c543GYPK1ITCZalUe9WLiB/VG4BM13dB5PifoWxNHOhg4OpQf0KKeA9ic0bERW759nHDIxnCjgJ7Q==,iv:z04TLMmuFjr0YhYPCSOYNGM/dxhRiUWuDMItCaCC5oo=,tag:00C+xGrA9UKjzvC4xgBPwQ==,type:str]
            key: ENC[AES256_GCM,data:GwHMyJkEhb+18BkchGM5pmVgK3QlxAEncm91CAlr7z1H4ROa1d3Nv/UVSS67gSZQ8+WsUTqoRrvZNpos0JQVMeYR8zu53yisL4PlE9SxsBFjGDgh7x9mo/FVi/DcpqIPyagt+mjXpGoXWdDYqdf942GofhHCmmYHcccrAUC6DE4d6CBOSKtJcNNab2s5LLphkUa7jzwen72NEiviGI3hGlpKyAkpcM3Tjr1xdootH+c1Uk5dZU9TUjHjjOyf2YXZk61CqLbF2gSxenuUGWIJnmNrYzoUVx9mET3K+tNugCaNw2aNBZgGJ/2TheAehF6NyGvH1Pt6tMIXdm9kn5hwp/t8B5JVnmZ4KBFy50+wo23zV/vk+plysH3taQw81/89aZvbqSArbxK/ovrnIK6AtA==,iv:SbaxjVb35xkuBdisAjLK4bLZ74CxXx6CSeSJ8UGUovY=,tag:3O5tBb2j3SOBkQ3RvCmDRQ==,type:str]
    # A list of urls that point to additional manifests.
    extraManifests: []
    # A list of inline Kubernetes manifests.
    inlineManifests: []
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1c3f5mkutp9j7vfs3qkll86fgnxkgxh2cshr5wjdp7y6gzj9445jqfzpnyy
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA2cXQ3Z1VWbnRVU2VSTnIz
            cGJpTi9WekpoaGZqdHZobmlKZGJuV1JPY2tJClc3d09yK21pUmlEZ1E5cDNHbmQ5
            SFNhajR6RVJncnQzT0R3UnFURWMzSkEKLS0tIDI4alkya1h3NGRRLytpTElHOWJQ
            TjhKcmZ0eWFtYmcwV0FIR1BPZ0pNQncKESTujZ1upT7Kyr1fusyWDBYpu0Ba+0wQ
            8xR9Gapgl5+2DkzBir88nchuOVYmqO4yIEIn2wsqOz+CCaFXdjezGA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-05-10T10:14:00Z"
    mac: ENC[AES256_GCM,data:26ACEWTtRl2opxMWVADWUgCgKjew0JDwYClW5HblhMShv4pSow3GoOhovkjd1AUkGs9gGOyRjYvTpSh0y69YKGxdXYlfKNDe30U0CnL+8owOl7d3ev7r76phZpTN4tak75bmRht3GmeTdQVE45Z2ux7GOBf9JUYl13XygElhQMc=,iv:YRgbh141UTz+juUsdN7/+laYR0yfXAE6NixAqqMF+pY=,tag:lGbCIGXMvkepHPjqwcb5gw==,type:str]
    pgp: []
    encrypted_regex: ^(id|secret|bootstraptoken|secretboxencryptionsecret|token|ca|crt|key)$
    version: 3.7.3
