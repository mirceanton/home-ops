# Indicates the schema used to decode the contents.
version: v1alpha1
# Enable verbose logging to the console.
debug: false
# Indicates whether to pull the machine config upon every boot.
persist: true
# Provides machine specific configuration options.
machine:
    # The `token` is used by a machine to join the PKI of the cluster.
    token: ENC[AES256_GCM,data:n6a8R47YhFNstzfNrLabGt/TV9V39O0=,iv:XMFy8gR2VyrpeLtj4On48d1ezAMWWVMYmvyIwZ16QDE=,tag:eJsLPIrXLBSJadCI0ZVXQw==,type:str]
    # The root certificate authority of the PKI.
    ca:
        crt: ENC[AES256_GCM,data:AbD8Ejmlg9H2bRThZRfebIlOQxmVuAznfRc8QYMQhw7MEZ9wJaU6LpRqU8bBC8p7byk60G+HYihzj3+cCbN/qCmJyCsYfWetAf+SjtDtRZmqU45ZvUz4/sVjU99yiI6Wxlz4yS6ovfz3HaEHFF4rv27oL/Pnxdt7+l++TDgg3Jcc4ZrqHV1RXDtkneuyY8JYnovBL4VDTzMPDtLQIIaOC79lz5mDzWxlPYoiBJCmExf5mmDJHAF+l24tWVPnfGtr6KZZ+9zszTyUEw+x/NLpiLTJpykr7wQr1fs+bsa1FXnDJ08SyoN6hA9O2hqIuVLq1jK8jGnIXj42jlDtQkqAoFMUnIt9lcRA6jC2BgUzKb3R7bo2hvGcppJS2OXQo+WgjfaS6aYt6kAUo4Ev65EHwuAFjNtfMxZFwte1ff0kHupwRKty/ZcR+4AUwIYZ+7BMgJcYOIS4S4dhLl99FflNBRavAzo5zuwoqM8H399Z/n/Wm4n73pZM1kUibbeVDDlczYnsRG9ncFZlwe9iei/EVSgx1XZs9KwHL0tFHzAbRzyvoNMwxNxBDJlU72OoCXzT7JBq2GxoEiyuu3cfFlrn5AZwltjY9WF4A7BoWpZFgpdl87lQFDMOafFBxWfJfwRBnNytUCXH2lxGQGfPBE/w/BopV+tQuraOlQKNCKWvJUmlwH9fcxZdNQNMgcVvxg/414uSIOhWT73JGXKPJ+pyIb79zo1i1WyYcmf/Ax7h1rzlzmKsEketgsmzvygQ2utEsVo+1h/uJpzYcbPyJxIbbq07dlPgm8oFXlFUBGbGZujPsv1j41DcFK8Hf8d40YlnzYgXrzo6FzF7zUMhNjRUggQAz/JWP66cdptVkGG7K5owqM57,iv:IKagpXUIBy4MBMIoecCXsRBm1/glNaKEIEKvy6VQhlM=,tag:s18ybdBi+7s1lHSN3ueLbA==,type:str]
        key: ENC[AES256_GCM,data:7vKUD8qR3qj2ZWGnwEOviMrGB0voKe9Y8yYPRZh5nhqy0+n+KXr4kx4aLH/gOF4JyfgOeHSJKbZtkfh2jxfy8rCPpVGxQxDb/sFfiyfrPZcOSyOBKhOsy7tBvUDNpngFnSet4PRRX41P0e+Ud/MiY0jvw/ynfXIObKt3c2yVsRQr66C+bHsVZAj0Z5qEb785y2NmryFXArYLnVnx9y440drqhCsDSOow9GgCzx8oQ2Yqd3Tw,iv:njAfHwldr5kmvZl9ODjrH0JkQl5/Ox3Ws+QWXEJO3G8=,tag:Ps49/IxSv2Rd4h/5QYFmNw==,type:str]
    # Extra certificate subject alternative names for the machine's certificate.
    certSANs: []
    # Used to provide additional options to the kubelet.
    kubelet:
        # The `image` field is an optional reference to an alternative kubelet image.
        image: ghcr.io/siderolabs/kubelet:v1.25.8
        # Enable container runtime default Seccomp profile.
        defaultRuntimeSeccompProfileEnabled: false
        # The `disableManifestsDirectory` field configures the kubelet to get static pod manifests from the /etc/kubernetes/manifests directory.
        disableManifestsDirectory: true
    # Provides machine specific network configuration options.
    network:
        interfaces:
            - interface: eth0
              routes:
                - network: 0.0.0.0/0
                  gateway: 10.0.10.1
        # Used to statically set the nameservers for the machine.
        nameservers:
            - 10.0.10.1
        # Allows for extra entries to be added to the `/etc/hosts` file
        extraHostEntries:
            - ip: 10.0.10.11
              aliases:
                - mkc-01
            - ip: 10.0.10.12
              aliases:
                - mkc-02
            - ip: 10.0.10.13
              aliases:
                - mkc-03
    # Used to provide instructions for installations.
    install:
        disk: /dev/sda
        image: ghcr.io/siderolabs/installer:v1.4.2
        bootloader: true
        wipe: false
    # Used to configure the machine's container image registry mirrors.
    registries: {}
    # Features describe individual Talos features that can be switched on or off.
    features:
        rbac: true
        stableHostname: true
        apidCheckExtKeyUsage: true
    # Allows the addition of user specified files.
    files:
        - content: |
            [metrics]
            address = "0.0.0.0:11234"
          permissions: 0
          path: /var/cri/conf.d/metrics.toml
          op: create
    # Used to configure the machine's time settings.
    time:
        disabled: false
        servers:
            - time.cloudflare.com
# Provides cluster specific configuration options.
cluster:
    # Allows running workloads on controlplane nodes
    allowSchedulingOnControlPlanes: true
    # Globally unique identifier for this cluster (base64 encoded random 32 bytes).
    id: ENC[AES256_GCM,data:EKJTmp+6s85cpCxpzRhuvjeARDuim5G5wEp/ikbiiH9Nssl6mgvtwleEbMA=,iv:jwawM3uH72TGxgUnzB3pSU31Xt3ug8RWiaeWNrObJrE=,tag:SOfPeWSggbOIOlbeNFyHtg==,type:str]
    # Shared secret of cluster (base64 encoded random 32 bytes).
    secret: ENC[AES256_GCM,data:LfcxBWRJA1xQf9Pf4xh/dSwDbjoYkeq2tP0lHwqGlZK+L1yUccKn5xjHnQI=,iv:0VZ7gyMBREhayhc9DwpMvOI2fP6KIIojvhFTo8FVVgg=,tag:OFUktDFn1EQH5XlJDbr9dQ==,type:str]
    # Provides control plane specific configuration options.
    controlPlane:
        # Endpoint is the canonical controlplane endpoint, which can be an IP address or a DNS hostname.
        endpoint: https://10.0.10.10:6443
    # Configures the cluster's name.
    clusterName: management-cluster
    # Provides cluster specific network configuration options.
    network:
        # The domain used by Kubernetes DNS.
        dnsDomain: cluster.local
        # The pod subnet CIDR.
        podSubnets:
            - 10.244.0.0/16
        # The service subnet CIDR.
        serviceSubnets:
            - 10.96.0.0/12
        # The CNI used.
        cni:
            name: custom
            urls:
                - https://raw.githubusercontent.com/projectcalico/calico/v3.25.1/manifests/calico.yaml
    # The [bootstrap token](https://kubernetes.io/docs/reference/access-authn-authz/bootstrap-tokens/) used to join the cluster.
    token: ENC[AES256_GCM,data:sMYZwnq51ISBh2AMuyWcNMrEwryYS5w=,iv:9ot47z85wYNx2evUVbLsPQReIHfYHb/16awgwCreOi8=,tag:JNXmo8EJ1YeFssVM3CfvUg==,type:str]
    # A key used for the [encryption of secret data at rest](https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/).
    secretboxEncryptionSecret: QbaXvzwx3zjKDE0lnapGB69ma69dx+seaHG6hohcAYs=
    # The base64 encoded root certificate authority used by Kubernetes.
    ca:
        crt: ENC[AES256_GCM,data:MKQga87TVpQiIwuKZFGJPlZLpyRNpxGZ5W6vzjj9e3aa2YtOg6DE0T4mvsDgENIn81Z2lfhbIzrh8BTDJNUEzsFLLkMB91wzA6g6WePymId4FcSuZjcmMsamjtMPqo0Sz8EVN4wtymwlkoFXEZGS1z4sccpvKYesAE+B6MQ3ccGbXx2tzCKUNavhnNBB/Oos7/TX+nKka7IjBmXLwj3FtHBI+Ad8c8ClRZnddhM2G9vg6bC/HAhnP9mug7iTeLSsinUgbKhdoAlOzdvENYIcU7G+yICCeJgG+DJU7NybJ6HVM9rvUSsMgOZsqqHxix4ZpFQ2jCeshPBERXB1R4p2Mt4hok25OdCHtH6LduPIyvEY5JZdmMrFE+rkPS54Qbvisn4hiiu00x9GWhNoH0OxGgRn/b2yG1/YI5gsFrnN8yUl9OE6qwDSGZepJY3//BRVGr7d39Lzqtu4Y3OaKaUpyambX3ppESnqay8FCIc7aouEY28a3U0+JYWLs2RxuHKfQaiGa5FdSUsiwBsfTL6FMudtDwl9HHCFBVnsrZvUv6EmHKUiEo6nFSljPWGXRYQJtBw6SYgXHxepr57KJazrgpIyxnkkrvZmW7fZmi0p6TwCpTBr8hLHKlE2QZAeEA9yzIhNNRhcWauJYetpuHjqqXYn0tIrMXMT5W/ySzqFDKif1XLE6/bSuYZ5Zvgj3k/hIeg5aDTTVSJWur/4aeivPt6i5lw3eMStnNU/egcVD0LeF+Pnu0tLF/CO/coj+NLCHMITMN9ENBhKS198Hn0aYdYHsnhbnjqfGEIFCkdWBLf8i+kRXhG9Lj70jWP/YAb1Z526XLrUv13r6KEg7+4ERz7k1XL87yVUnXyb5itYaH5DMV+BFUNZipGxGaTyXC4W+u/Sp1XypueMSPyzMGEm4B8PY+eJsS/veRlTaqgS71zwVIEIADQXd+WHIcnYQnt2GWr2jYvWs/PUylaH0hfSxGBVHFihrc8hxiW2tkAlOCeo4DRir+4XhCCO0xeTmQk64AZN28hXUoSLN3YZJhzBNwuyGauL6JPoEAQp2g==,iv:K/1C+QpN32+tTIyqIef5iiF9Pw8TU7PG7GKNENUHYIU=,tag:EDdwTwMFMOTFWp7RXl3Fjw==,type:str]
        key: ENC[AES256_GCM,data:lQ4XQriKP3xI6ijCudl5/GEE+9kVeLGkAZLn9/SDFa7zRQJGe0uLtbUrQA08HahsT2iXV+vLKC6eyl8cq2v9DB1Xt9+ZJGRibMDqIsWwpubj8DkMKF1Hqt98+5rbCbmAYR4WNwYet9I4i0nYUg+sXK1luhSNfK77Zt6FM4Wa79XXqEptXYWIjPjBLXnA/frGoAyId/X668nLBksMmleRF5GhaiSfEpuXzITsgnqp3WiUsEQI9zdWeZdG5wA9mxjrVsJ4pS9H1QGBvvPIrM9Dq5pSsW5n6NobVw0hIQs3yTntj05oXc0FSYoRYNA1gj3r7ERciB0NQ/zTrkU1i6x5oWjOPyczvA+MyHSq30I8Jqq4w/yiASxOwroghdXCpayXmb3kyAcDKYG1yT8TM4uxjQ==,iv:enWiRhSEkRy6SJq+vkOH+jQUSO2OQrA607z8au/n2do=,tag:kQQEfw45RyoJZM3Iyn2lug==,type:str]
    # The base64 encoded aggregator certificate authority used by Kubernetes for front-proxy certificate generation.
    aggregatorCA:
        crt: ENC[AES256_GCM,data:UTSTjNEjXM7nnSSczKoB4frPL7rpNGdZsu05tT+FkqFfBBTAHEh/DSd5ieCQKg4BOay9FVMoMwg/yXivO6AaHIaPb77LCmr20IwSK5sNL/YCkSq2+FUtIbzS1X9h+53yNAyywDN8JdrXM6+IBiheK316G4oWcP26vVxN885T+dSt8NfbrfwMiJJ9ftqhozp5bx+AYRPmZXxKS6C6ztlwQQnr2rDN3DHPzimiaJdun3/W3SUiHnbIUw0/40j4pIvR+fOACQAnuZb8Lt/FCLpR7NkYxo1AdIi2I/apI8KyjWtf/O89yyJzx1z+WT6AgQQCg1PKUzDT33pQmS+37H7UYSBvLwRkeOmJpmyDq/pp7mJkvE1Tr4cwECnebK9weEnuhz2gO1WbjgFZuPQlOUh8XWQZ6WPbMl+ay1lV6IkQNMNy6o4TclPInOsMxBsuhORZsQ55HPOX9z3/C1uue6g5TJbiPSI6kAzgn2P65eBdR5hGoLXHvXWkw9l3vNf+0C2Lg8R4KxbaUuGwWFaHoJDznyhXSZEjRAPBzAEutGVCGolFYURin8CmO4oSZwwjydm0HBD8vk6nUrzt9Z7Rymfj0xRBeHnSH7Sy9raZfhYsmbZgA228mdvihKqNhVlSwxhOB3dE5bkoAdcrfug/V0sxrfuA1MgMb6Vo+0kdB55YZ1xKntCEUeQ8sPUnyn4npUGLsIco8ylvwADrSG1JO6eeTRG0KcRWe5wdB14g63FRXCPDXMmskhnTZVZ4QBl5mF+2HEJTtEu7Ay94Gx/MEPd81HhOr0nQhKzOcbktU1ol+/A4uVdbTmZWUQymRO1oavE0UbP6tspZ2AmVZi1rdQDjXEjDJRdkUmpfQpULFJqIA2cvXorw0WCtQ0Zqvc00Q15/Yh8mVqnxfPcZkmOwsF2M0H08kbxKj4vMiEn9kS8WsXqz4TAi94dwIls6KBqvU1vU,iv:DO0eZvHNAaH78vaUEkyfiN4T6kRdVpiIeVkId+DvR9k=,tag:nVU7EWudKzVsBTetMMFgSg==,type:str]
        key: ENC[AES256_GCM,data:llBN2D95DAxXeMWG2EcSO2Bv0dX1UAnurECiSdhhG1eO62n4zwHY9abqPpalL7grOPzS3paOc5GU8otmIYAxpezWsG2n+ALlCmFcvZ5b43a9uG0An0EUYIlbN8G4g/9bLsXFLFRDE+m10q/d/XmVA8HjAQ+Kj40ApCCh6rlx520ZhRJpF5uzoeU+3fZPQulRTdoOeABYO4koUAkwsRttiOqgFJVjDhT8j/hq+q8hSmag9rgaYuYD7LM1DoPxTDWbgBRFje48WMqMzr/pCw4yCv8CVmTqpBMQzE6pzNfKwu0AEl55Fz5xaolOM/eP1JnfnzxIxHyuHxZJ+eSzRTeaOjwQFNf3lJzwjjxe33XpskOSOvWO5go58HRGURTYAycIaLffa/a5ObpKaGVZSKJjDg==,iv:equH4VI51KJHxyuadoAPJUMSs6Hw9k+QbfGrvYmKPTM=,tag:M7FkIYmGx7hvgdbF/651XQ==,type:str]
    # The base64 encoded private key for service account token generation.
    serviceAccount:
        key: ENC[AES256_GCM,data:eHfY4XYbD1pQjDt1+OGfUQ8yqFeALHwaxsSuA0f4oXZDGD6ilfXv3VDbjA8Qi+xp4Z4UGRTrPK5l+O2JmwMbYY9FUoD73oA/XL2sHO8y9ML6GtC321yZDVmMVcfS3B4Bq5vb5saPaRle/XsVURAjKH8J5VVHWjstnX2umrRDxCBGFHvPzteBvVXtG/ovvU9SWLeGXoCCHWTndEQXYKHkYUd8T0WQ/tMXn3oCuXXKEYzo6FL3sN+zMiXep8Q5uvYwGncLWmhNYiAqKOmrRm1IqZxtUedMDzcb9+hFftxvaMHyJIz3f7AcoKqMD+OhfmZvfpjM7JWaTTXiqZ8q0kzPYJR6eo+KeeiDs16DfizoKDAkghylV+/j5FlQvL+BdyufuPQ7+2WsBC8uRUeu7VSJ7w==,iv:ilcWQ7iKsZHNpQR/03n1P1mB6Gme9r4bsvYTTuhTRNc=,tag:KAeXgtIGgSHooN7M+b6JxQ==,type:str]
    # API server specific configuration options.
    apiServer:
        # The container image used in the API server manifest.
        image: registry.k8s.io/kube-apiserver:v1.25.8
        # Extra certificate subject alternative names for the API server's certificate.
        certSANs:
            - 10.0.10.10
        # Disable PodSecurityPolicy in the API server and default manifests.
        disablePodSecurityPolicy: true
        # Configure the API server admission plugins.
        admissionControl: []
        # Configure the API server audit policy.
        auditPolicy: {}
    # Controller manager server specific configuration options.
    controllerManager:
        # The container image used in the controller manager manifest.
        image: registry.k8s.io/kube-controller-manager:v1.25.8
    # Kube-proxy server-specific configuration options
    proxy:
        # The container image used in the kube-proxy manifest.
        image: registry.k8s.io/kube-proxy:v1.25.8
        # # Disable kube-proxy deployment on cluster bootstrap.
        # disabled: false
    # Scheduler server specific configuration options.
    scheduler:
        # The container image used in the scheduler manifest.
        image: registry.k8s.io/kube-scheduler:v1.25.8
    # Configures cluster member discovery.
    discovery:
        # Enable the cluster membership discovery feature.
        enabled: true
        # Configure registries used for cluster member discovery.
        registries:
            # Kubernetes registry uses Kubernetes API server to discover cluster members and stores additional information
            kubernetes:
                disabled: false
            # Service registry is using an external service to push and pull information about cluster members.
            service: {}
    # Etcd specific configuration options.
    etcd:
        image: gcr.io/etcd-development/etcd:v3.5.8
        # The `ca` is the root certificate authority of the PKI.
        ca:
            crt: ENC[AES256_GCM,data:TScRhJA8ZbWL6g1lRuayE23gVGMgndKenQ2QpLfsMJ94L/VhiLfAKyiEFYmxq8i1mX/FjWbAJmKEmHH9KJfSYRQsNrArm62+MHftCcMHleCFT/1d2X0IZCEUDPnGT/XYIjLMNBMAdC80iHRx4H5cA7a1b4S1j0Wgspw9KCDVNgHseaLHspLXpYzzFXnV5UfBdjAW2s8ffKQ8TsdwuEH+hud0GQmiCRWG1P+QmNDypbt6ZBU82ppN5YCMraKqqbQuRWe3GciBsBEoR8zAPRRjtoJ1v6Dw6I2Tw97tF0+YvLt6200iGpCckUanAdQMfyDEbe/oID0oG8/TxJ4qxsBsR/YsQgObKRh9jyGJ/ZVqb4bWBB90cJT54fd5Ux6abo0P8e84G/p1/spG3iGi3uOPmqmVGABL6UAGRxin51CmxaaxmgyWmb/z/Q6Gjw9p3cCbZxWW7g2Oox/qs/OHvLRYM+cuTZQuxtp0UH5Vi9jTf0tkq5J5HlVaOOaQLQqJ6Bz6Zoe++A3kJ1CG+nya62vKXLACWVmMjiioxnAhYBJurr/0X/vzHY47YT3E7O8ZiQBb/gWtivbL+O59a9Q9T/8FHYT2QZ3FoeUFLM46hCyxeN90jQJW0W1pjIculJ/Nx134leiNojwJaiA6PkLbT8Qk5h56HCjFXqzOMoKO9mSiQY34f4kzhpkROXWezLE+N6AfanG+VAQqXUjrhOMjqqnhA8DJtn/7ZwtQrk1Z7i7hfSw5xDIDrw6ldJMuJOvhcZmrIy6zDolEyClLPw9QI1wcZOhgzHEf7LbFiX0Nvpc5oaKVfI7+CCuWXUQXKryEp0zfrkLoewuUPE3gjQa1KxHzN24UsGqJRZCmNHG1e5Gpmyu+DhohTWRH/3jOfgLyQN/CUrHU2KdJiBptn2wBY/g6zCo1zcQJ/4LTDX77VqWP90VEZAZSUuDL/IBwgv5WPvnf1LbVUoKzdejBZ15MJxkhTfs+XLNRTQ0pw4LmT/d8Ir/F7kx2M7TSS8xH1G9CsFG6KChc+Q==,iv:XM3Ap3PqF+32UOmw4AZEZyj88gQCi4SveCQcm6BGOt8=,tag:ty4u4RYH7qvTY71VmtyXyg==,type:str]
            key: ENC[AES256_GCM,data:VR+H1O4hl3pVztco0W3Fn0QIUNvvePA24s0Fbx96m65K55dUVUlTImWVoCGS0eH5IF9awsCKu94pFB7jMV+Xu1Y8nQMDsX4bhwm96BTQI3H1KFmbM+/Tshjy89Eu7ZAZ8LXMqgTq+HBasobnKG5IFWWPIKQIG/grKSfzHrUgNP0ql6SlVSAXbawkC4PrfQVArOmjn6pRMptTR76ml+rM/+oq9TjvZGE8a3LxY98FhmBXM4gTb3SiIne96Kl5YLj6l3kFYsbn6T8pdqgY0msDm9fvA1UA0/V17vjOKEBDzQAy7PdYQcPZYbpSY97UtfwXv33Nt1+uaWHviwyQwlXdJh4KNZpuBwKkuHyk6JLVVS47UOMoCrvKlSRAv13MKh4t6kaWNWJsn2m17Dc5tuG6ZA==,iv:8IGho5Gs8mvbBPnb1843Nys2KpboX3tOiYs/HjpX6f0=,tag:j+RBjVN/ppOcUhqb00PHSg==,type:str]
    # A list of urls that point to additional manifests.
    extraManifests: []
    # A list of inline Kubernetes manifests.
    inlineManifests: []
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1c3f5mkutp9j7vfs3qkll86fgnxkgxh2cshr5wjdp7y6gzj9445jqfzpnyy
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBGWDRBUEdSbWRRMlh1U3pU
            bDR0NVNVcityRG5NTDhEdzRrb1M3QUg1N3o4CnRyc2tOZVRrK0tRc3BoOXlIamRt
            ZkM5UkFqYkx2VEdVVnFhdjFDaDdqL0EKLS0tIENGYllGc2Y3S293em5pamwwNmxO
            Z3dsMTBLbVhGMlQvQjd0OFpsenNqeDQKW0Ev5TpDiyavp0m1kGtO5c1vtCdSygNu
            /nHjixUrXBjPn8iHnbcFXMH+IwqKz5UNcSP9q7HCAvB88fAkkxxoUg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-05-15T19:54:56Z"
    mac: ENC[AES256_GCM,data:gzF9hJivfmf8slApWBscfANOQUltuNdSrf7A/35aQGtb2lD9h5FGqVrGmCDLQsgbaU32Rmf5udo2WJdiZp72MqByy/KmX3FjX6Bs6Mqk3JSaeVKFj5hHZY2TMAqz2r7/GSMixDyqPPsJSY16tlC/yogsThUtZwYFJJYQPde/eq4=,iv:LpoWT+U0N4gJwJZjPPGaidm387Q3p/M1ySxcoh+gjGM=,tag:cjaqHr7YwcIDGrFK0rMEXA==,type:str]
    pgp: []
    encrypted_regex: ^(id|secret|bootstraptoken|secretboxencryptionsecret|token|ca|crt|key)$
    version: 3.7.3
