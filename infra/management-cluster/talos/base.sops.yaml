# Indicates the schema used to decode the contents.
version: v1alpha1
# Enable verbose logging to the console.
debug: false
# Indicates whether to pull the machine config upon every boot.
persist: true
# Provides machine specific configuration options.
machine:
    # The `token` is used by a machine to join the PKI of the cluster.
    token: ENC[AES256_GCM,data:4v4BJ/0ArWzR7dBu54fKWoZ8JSld1ZQ=,iv:jSX/xaokN/7zt2f0TYfdhlxx18NqceKbhuhI2bBarko=,tag:VbmZMufoQwvf52/pbedrZw==,type:str]
    # The root certificate authority of the PKI.
    ca:
        crt: ENC[AES256_GCM,data:ichTAIzVlju1OiLV4QhLb7mhLRW+sX3bCjiEFBt1nNq3G7WyXF7mUl/mtYKkG08AQT7Nt8QfOooxwJuhFLoG/Sch/raeH3+q1GBX91dMUROrOLJGp1ohv970YrkiKyYwWYXte2fa0v0jGCmkLcDTtIEBOZduRG9Ak20U5d91g0ooqgXBrbfyV3lVUkVkNh6u/vpO1c/vZ1DwLckyy4KULWQxwad7W3VRZtFvSv67HKkJG3nfZnGnASIonbfPrW3/FH7rmLnUEQhVlMVQvqQYyxU1UmY3rT8dCn+VNb5iZ14I23vKLmMxmrZS8xlSg1OZ3wotj2QAZmdWSYRiQxhMI+uo2rN3xdxrldUS7n/uiYWSMZRQvUdQyOxju01JdaKzLk6NrB1Qum2RAo7rtLA0QkLPBTb4ba8ETyDfHqIWrQW+/9etjXCyHCHVtG3oHGa3hPsxXCQvKH6HTSTj8kSEJm+9Z046dBQM3+wQhsFMlxbBiGD92ay/zjAq6WvUFHULR9aDZmKY0dnSC4HYqk3unvwnm6Vxj1mJfgD5rBg/yRss6nWb8+aV6Kw9MqX/QDvlHCe7yZFAdhGcjLsY+EhFOyHoXrvL6EzkvUQOR+4Pw57VpE+RqoT1bsu1hRd2rAtjz5B6kJopfsTv1Jmi/8NfnY9LxrXQfL51zSG+1xFmP0YBVkp78rzDUSLSBg/0IoV9CU5LQxslJQmUPVM0wHgcSp5FR3SLiZnAU8C/Rv17SQEG/CckGv3NLaLgajQNc1oXWVAKYl7dciIX3rBmNbueTQpxmnV1mMllQ50eEPZ3pYFWvXlG3ZAGGGxMYYg10VuoxwLc5r0ZL8nMDFY7Ai4J8I56lQnTO4Bp7uS88AFXAGszD4JW,iv:fHaLax5OQyHwLzTRiGfhVUv3Jk893oZElOr5eKFEDDM=,tag:nvUT8+a6uL/6bGd6bgHzuQ==,type:str]
        key: ENC[AES256_GCM,data:W6Ov0sY15rBelFcf+bzacuSQtodj+mt71hfLHhCM6/EMwr5XiEWxOQ+8tMZPC2cpHCFGnSVHLGFuH4vlOfuqsn1u3aloPKBJlrfLjvmFXYRHmpoBqIDCtDSfm5vIc639dznhaiPPrwijf/9eQFxeVNXmUhgcBgng1yW8JXRSjhjzx9Mofa+tPFIu9jomC/LLQEI5qD4KnGlfJLryKR0VtTkd6gNLvD7pAnyIX1hqBLPGKGI1,iv:6t2/GS3CsvX125aKAaBUVTe4V9bT/TXQm9JupXCCWl4=,tag:ee9YpvkaduBMkzY1fquSow==,type:str]
    # Extra certificate subject alternative names for the machine's certificate.
    certSANs: []
    # Used to provide additional options to the kubelet.
    kubelet:
        image: ghcr.io/siderolabs/kubelet:v1.25.8
        defaultRuntimeSeccompProfileEnabled: false
        disableManifestsDirectory: true
    # Provides machine specific network configuration options.
    network:
        interfaces:
            - interface: eth0
              routes:
                - network: 0.0.0.0/0
                  gateway: 10.0.10.1
        # Used to statically set the nameservers for the machine.
        nameservers:
            - 10.0.10.1
        # Allows for extra entries to be added to the `/etc/hosts` file
        extraHostEntries:
            - ip: 10.0.10.11
              aliases:
                - mkc-01
            - ip: 10.0.10.12
              aliases:
                - mkc-02
            - ip: 10.0.10.13
              aliases:
                - mkc-03
    # Used to provide instructions for installations.
    install:
        disk: /dev/sda
        image: ghcr.io/siderolabs/installer:v1.4.2
        # Indicates if a bootloader should be installed.
        bootloader: true
        # Indicates if the installation disk should be wiped at installation time.
        wipe: false
        # # Allows for supplying additional system extension images to install on top of base Talos image.
        # extensions:
        #     - image: ghcr.io/siderolabs/gvisor:20220117.0-v1.0.0 # System extension image.
    # Allows the addition of user specified files.
    files:
        - content: |
            [metrics]
            address = "0.0.0.0:11234"
          permissions: 0
          path: /var/cri/conf.d/metrics.toml
          op: create
    # Used to configure the machine's time settings.
    time:
        disabled: false
        servers:
            - time.cloudflare.com
    # Features describe individual Talos features that can be switched on or off.
    features:
        rbac: true
        stableHostname: true
        apidCheckExtKeyUsage: true
# Provides cluster specific configuration options.
cluster:
    allowSchedulingOnControlPlanes: true
    clusterName: management-cluster
    # Globally unique identifier for this cluster (base64 encoded random 32 bytes).
    id: ENC[AES256_GCM,data:8gbRDl+Gkpegmcm20WdrEtSFL3RIxnf4buTYdGhePIISPkGEi+9NGvKtfSU=,iv:z/yn+5RV0ahQ8J91XZfxrZjcVewqevmjWooIOVX9Dbs=,tag:twjkTKCoX6lpPzdaCLZ5/A==,type:str]
    # Shared secret of cluster (base64 encoded random 32 bytes).
    secret: ENC[AES256_GCM,data:sv1FkUzt2nPhY72tmUX650sIwpXthDrZj35u3wegD7Nv8D8G/zcABnQZGg0=,iv:VWNoLUrvK23QG0e9QFUlzIZhxfKpG8IlDsKG4FpwpYQ=,tag:9slglMCCmJUmoOyWLwVLHg==,type:str]
    # Provides control plane specific configuration options.
    controlPlane:
        # Endpoint is the canonical controlplane endpoint, which can be an IP address or a DNS hostname.
        endpoint: https://10.0.10.10:6443
    # Provides cluster specific network configuration options.
    network:
        cni:
            name: custom
            urls:
                - https://raw.githubusercontent.com/projectcalico/calico/v3.25.1/manifests/calico.yaml
        # The domain used by Kubernetes DNS.
        dnsDomain: cluster.local
        podSubnets:
            - 10.244.0.0/16
        serviceSubnets:
            - 10.96.0.0/12
    # The [bootstrap token](https://kubernetes.io/docs/reference/access-authn-authz/bootstrap-tokens/) used to join the cluster.
    token: ENC[AES256_GCM,data:5xewe43kkgt4XZYiSoDZ/X1nU3gZGCo=,iv:w+DkTeS0Yvb5ah32sFfwJ1BFWB8sSBitgNc+1fko7lU=,tag:ScLAmMVmHX6yUBJoMOPcZQ==,type:str]
    # A key used for the [encryption of secret data at rest](https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/).
    secretboxEncryptionSecret: PZ09M5ZzWPWXxhCW1lpyIZI79tAS51zrtQFD6bUirUo=
    # The base64 encoded root certificate authority used by Kubernetes.
    ca:
        crt: ENC[AES256_GCM,data:Bd0TYU2fYtdgFBHB7vEnYPcLhiwC4KUt3NqgqqxBdaA1fI9Fmy/34h9CAXRlhWt4RLKdZMtuIIq64mPNcqkT9YuUb8hSiwcwYL3ym6IQQKWhSYzXlh/yCuojP5pR8MBibcUw5qVipeGUjaNufuzb8GIrdfGaj1W7TQJlYd0pKqnc8ry0ZHxX+aKIPsRR9sSXayOhgEmAb9VSz0mXiK6Gb+CQ9PbVMdjqsaxa28J6Fmy3W+bF0sS9p2g7S/JLe3DduPIFJ4dysUYopolByK61X5U47k0EcZf6gi/br2HNrcmz7YnM7psal/29PVeo6zPLCn/Q86ahI660tLIuFEHui7jcFli0bhmiM+XVV4k0DOs+Y4yI8t59MksLVJD+ShmegmQiJOwDCHMm2r/Z62M3MNtzsKjGB6LcorMHUELZzWU6uzbGPONFlknSoohsy6cKf5ULqcey8XVzuVfYjTMqmIeO6zpH09MD/Q+8K6PlxH559u0srhagS/EnMUWgbPhKdC1DGDpWh8fiHtwJsFa/GF80G6glKAcZGPpZgbnkqUOMeWzIvDMGVfd9MRnpNRFbzpWDpuC78DwNQ70Ft8cB8QhzVuNiebWBaJr//4YglMfDo8BbrBNrAWncLbpCuNojf2gTbJBkxq+ok0dyeyUz300eT1g5OrDzm9OpeTlybAWq1nChnUFRuLBiV80oNAvLpEX2A5nR1yPCH6AtvrWGMv+lcNN8LqaJYoPAVy/85SVR+hywoOUQMlI7d5W91JCfNgjPxLSTk237TH/feqV1POF8qXtvqKCYcn+p07Fu+1DTXsMfy0c21JQ2rXKp8KjH2pa3sY868i7Eua3LzWJqMEjQSzXUMlapdZxlw9pOn/wQaQkqHBSE67akZr+RYBeVTwK4O0qyru1fXmCdpIbTz0n4qbAsHFMWwHM8WgcYa/Fsvx+lrsxyj+hs4EYGPK8Ng4HxfPqjMOVFPpMcO3vXErsJqlh+76AfKmUjy4j6b3zG9adCQEE7iQ/DMFQfiOLegehw75eG4r5yCWbguSrP1QlJB8Vn25KySXzTJg==,iv:DjIeAn+B1GRxxP/HkG7tt7XsYJEiE04+zeGS8znsP0k=,tag:BR9B72D3VcivK/hecy1r2Q==,type:str]
        key: ENC[AES256_GCM,data:LSFrKqvZKqvzA3ftedMGuPNnPtW3/skbUlAB5UDXq8J0XaeFH4DEHrQOACqOfxg7c9K1uJxi/3DnrHznK0IHwASbifl4W5CMzs+LiONVzBdLJt0bjtovYbOnWrLkurMhTUF5i1K11YytRMxPjXAvQr97/zgUBCW160kf0vQAyTpEqk8syuWvPO1w5S6kQAfvoV1qCFFCQCX9J2hQzBanXqIN4ChA758XlwBg48VeX34w5d3jKAT4sRvY/NZN/g2+iXpEnIr8bFHJx33N3SweRG5pnrAgE3mPEumdfWsb4GKgbgEBFm0bJ4UQlO8ThkP0zQPHacD322l4uZ4GJt84MxDe3vfW/ivWfOdqTeojAJo3IgFIofYi8OtrkO73pGbscCdTG0xbkIve4zLRbKfKQA==,iv:WGjXf1zDZBjNf8qXgZ2N6bfcqPAkWLa7sAnm+LKwIo4=,tag:2B2WyxQg1GfQq06vlZrn7Q==,type:str]
    # The base64 encoded aggregator certificate authority used by Kubernetes for front-proxy certificate generation.
    aggregatorCA:
        crt: ENC[AES256_GCM,data:YSjiovvJ+3nKXtIovA6V0YjZr/6K5eUOAq34QJP3GRkJMQrjx0hVPYSZwzIA/PPo/mQ/zT1JpnnTq7A3eEdLSii5gudEhZ4uLqvO0CMjf3z4U14G2OG3REe/eKYrkISyNDjuo73JjrbTlTsXNlOnCAxCfnGC5sNVfWDAN2z7x4C8/yQmd73ZK7JOg2JAFXE9VeFvIon3g1p6A9YekDSkW5vlGa7wx+w4PxJsniSsXIEaFET84c9PZZFBMgjkLQ5O2Rv7RHhC7xt+LfzTUdFmogJY45/czJeaee+OZi2Bx3dMNhZPMrd6zjBfuzh2Hcrb9fMOG1MTwPrkat6QJ+DHWBvK/xC6CH0qbgMeJ9V2LBPxxw13RBPBE2+zIs+U/3GAnMlmWQBTiHoYhpV+GDz5C/2MMyvA9kdEJSUlPwzlvSqkvLZCy9jTdcoTt5KdXit/ocKi/MO3SEV1P6ls1UogAI1NzysyBePy7QBdowF4oLM2cLmZkT89PnOudMuX2bazLM2Gglrv/B59HhVo/u0rWUtyFFVZwKBTIAeimPrJSdY7do7rDafFlnpL/mgfn9fuWLnwp7hHEBdvSAJbwBaLEKkGSK2zF1YSV2+lBRoD6YRGeWs26FNg5PIEntpWXzhUn7bXrAkSOcvVdSHASaOSOriwJI8MRXOamjb6GaTRPHDL14S6cXkNpEYlH9lHFZS41R32E2y2pakkk/sZ9s8qSHIaTbOp9DMI/M4yJbNsT3ftXmU1OC/u1e6U6GjwjE/9LMiWBUhNy5oEvPv+E61PP1n8VcqeGqwCFlAvzVYrVJV04yWwDkXktL9SWioSe3bH5n9prZrhDgWrXEFn+kDJmhYAopP5ig44W8s59xEBmRjwFJOqU/I0yACJUJGWmNLAsTYW/1JgB6ESV5w3FuhhwtcINLmJUD1faz6g0pmcsEIH18A29IdlweZbpb8vg9PM,iv:flxssVnEkGt77ZGUQ+93pX5FSvVpHV/VXQnrC8wnh+Q=,tag:M9TxlHb5bfdpNEprbpKTAg==,type:str]
        key: ENC[AES256_GCM,data:czHhs3bfzutWa8I/xUuu6CdFCaxBv/HMeZ3XEX+RcCgBLqzXX4RI7oQBrB+u6eGEbeygZLzZNWOeNPTefJL/suWVnz4eOPjNEOQKob129LtCE6XfwOrdrTR28CGjbYHUtDVH5quk5DDQ8mOZPWieMfcLuZhhnbJsq/yTSZ+RrzBs8AmFMLBVTsd+zBCvq2CaRIhaO2M3e5+Xog1BiI6+jLEJ1eRNDdiiRczC9PCikBxKZKuCk2/vuj0JJdVL0kXbgJ0G+2BoM0MhDaesSGIlJgRXrPltGBTQp/+HSISOmZ3tzXdBGEb7RhvSEdElf+yXYQb/GJ6jsF2r8m/KoTPZ0uTbqb80ell/sFNkuJftWfySjAP/BDJBxzNo5Fva8JIiBORajMrRfMkPZ2cU2HVwbA==,iv:RqK2ENt9bhHO4O6YJ5s8m/bVUwtc3rjj4k8Oj9Ufue4=,tag:KPRnMTyy7F+nyXwA6/zH5w==,type:str]
    # The base64 encoded private key for service account token generation.
    serviceAccount:
        key: ENC[AES256_GCM,data:sfwcguNjK5t39lk+4m/IXxSM7AWyk6irAFTVcXOcQdWFEZaZH/1jTHlTKaf21V6rryxTBtEvGBsLsA8e/eCfpil63Kr+ANUWqwM9/sFA7+XWfE+OTGXjXuVsaYp49r1ZQUt6ga9gKhBVADg+VvjwG3slkfGzRjIv4qD4MsTnfLvjkgi2RoT638yGka++JnvsPJ8Tus/d0cLZGz0lGTklzpsK96KaYAqc1g6msrgc75s/jMsh+jwejvhmCLCTrAQhPNG+MnuyxNR7003QjBEo3U0uIZRZ2NzFiClwVx+zembrXMNyOfgB0KBOMM8SVPhFOr9bTd9bdM3LceRJJ8OtVqhTzvo11bF2AGxVFRaZtU/0f3R9QTaMr6jR1bGzp2qEn+LDSuWSgKyltWSgUAV2Gg==,iv:xZO5u2BHssS3y4xwhggusykU335q8DHtjMjQiWsf+9w=,tag:6jU5ZTvcQs3+DOZsnxYLRQ==,type:str]
    # API server specific configuration options.
    apiServer:
        image: registry.k8s.io/kube-apiserver:v1.25.8
        certSANs:
            - 10.0.10.10
        disablePodSecurityPolicy: true
        admissionControl: []
        auditPolicy: {}
    # Controller manager server specific configuration options.
    controllerManager:
        image: registry.k8s.io/kube-controller-manager:v1.25.8
    # Kube-proxy server-specific configuration options
    proxy:
        image: registry.k8s.io/kube-proxy:v1.25.8
    # Scheduler server specific configuration options.
    scheduler:
        image: registry.k8s.io/kube-scheduler:v1.25.8
    # Configures cluster member discovery.
    discovery:
        enabled: true
        # Configure registries used for cluster member discovery.
        registries:
            kubernetes:
                disabled: false
    # Etcd specific configuration options.
    etcd:
        image: gcr.io/etcd-development/etcd:v3.5.8
        # The `ca` is the root certificate authority of the PKI.
        ca:
            crt: ENC[AES256_GCM,data:pS1161y1wTSkCRd+vAdaBL9O+3O7PJKvOCRVi7LuEI4EO7jrLVHeUbA7/zZXIjUs+6yTc1xqEIGrFInpDKZXno+AUdLX4xan7B0vVGG0sfgug2m9LWsd6ZzsebyJ7N36g1oEBckF64NcgaMeE8XL5UWsNR70TsIzb0CtO+X8ytmWQAobdDpDweQyhM0IHJR0kxm2edivaLNO9/HSuG5zL2RMNYGjspAFkfU7DgBJ42Ss68FglxM10M7c5/MLtFD5HcaJadIVVcXxGk9vF8MDGcJQuvMxRFrTquyg7C9y/30UTtYXCrRqnCGjPCTMwbVwuW2/5nZWZOUeamodzCobiCGBqDocjFS7v8oHsO4JLyK9J56vH2gnhWrAWsq56NBDv9sN16LrsxjL2hSJjqNvHM8xO8D7CVA9oB4qDD7ZNAfqikjiCWTb2nEhUMJTdy8rLoq81BY6NgEmVXVobYEYgymA4iA5+3z1oG196bhlrQ8k6eQZLqNI+Pd9iTKEyngdswJMUEEGoLcZW7Erbz2JmkTAgmGHcNGijoDSqIbNktcsY3azzvp1Dy3BaoqiWot2rHD7J7CXxCfXzmTb2XrDlDbENaTxU8AFyp4iK9v2BKEGNJZJ14OUoSnQ+gG9Xw4k82YLD6fvT4V3h92aUDnr0Ib8QujQXGoVgV08you40ULKEDwspo8r3g/oF7RzCrn92h4DSngwA4nzFCy7jk2keA5tubJb+RmcS1H1HPZImyVakrUl9ft0cZFMyN3lCxJD/IB54dnddfw09N9EO3ifb9V40tDdtJjp95lKrCQkMXWFR8ARqh8BqWswAS8iIaT0Ss4AKTRJZvS2p2afZYH2/l0N56JXlmSrcfJ5SekSNQgqL/2WFVtWmEb9lqR2BgtNDggqYOBR6Vkvkh2bOm9xa51sFfAbUwFVf/u8qNa3XJuhi82P5xtpsWECdmCgaRy9Db+EybUldGtS+EBVCA9w1dHQHMfIPPvBvpPZv9stO03z29HSoPrm73Pe7jQdlEUPhr+ncw==,iv:SuwoTfR0h+BD0IVPtngBIj0sAEQY3jzLe0rL5CgX0A4=,tag:QhD9xzTruzwaMBkozCQslQ==,type:str]
            key: ENC[AES256_GCM,data:kCLF+UtkSp0xg/f99AEUMeyRx3/n4kLwj25I7S88tarwGvSngvkqhDkU/C8Yf0ZJtQRhBZ/Sv65wQ+4TIJ9LsJcTpev9oCQ62UN9JlpOhhAmrAYCXprsrCQazSvFpI92n626tCMMS3JHRWfV2FmEM7HRTKynnBdkqJQ76qD1kyrWHRTuK/TbjbN9Ld65acgE3Ym+rXN7wqWUOf6sh12R/RMn0IJtO0DJe9Q/Jy4vP3RpvB7lnR5E5rQgUkdg80vfrotaaQo9LlqNvVlYw8v65/Ps8uj2l9cm5KisIe06QSCxMX+5/aFmHJSnzSQqAB2rktG9Uv/MYwOMAsvkf3VuZrMSJukTSirPCL4Xbsqru6UyI+fVNThh33NYjkCZrfhiELcJ5jxhkRQBB5iRewFlVg==,iv:SZHJM+gSVzKEac8Iq0TxHA3+tL41ewQbKNCI4TZmGDY=,tag:ItmPX2xRfPKcjHF2iTJXQQ==,type:str]
    # Core DNS specific configuration options.
    coreDNS:
        image: docker.io/coredns/coredns:1.10.1
    # A list of urls that point to additional manifests.
    extraManifests: []
    # A list of inline Kubernetes manifests.
    inlineManifests: []
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1z6la87sppenwcdcr7lqj8amf5e4x7dq9gzr739cwg5ve6vgj0d8s6cahdj
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBYQzk3ei9OazZWSm50b3lQ
            REVSMXBOcDNLRUtGejVDWjBJL2YwQ1BBcUdrCjlHekNQQ1paeFlweGpqdlhJR2hJ
            dFBMSUYzRTVGeHF2VXZtTkVnNFpjRjAKLS0tIEVLWDFRc2FTN1lIampGcUhsOVBq
            MDQ3UGdhRzhNWHlrYytZVEtCeUQzV0kKS3GN6BMEwbKmcsMWbyeK3N/bz5VPQlAg
            R4IJt1xtIRG9dvOVW80Tbhiy1wA14wajaD9dEV3DXuFX1ppG3KgOaQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-05-16T11:40:14Z"
    mac: ENC[AES256_GCM,data:Qh1lRrw1vDVBLet46H3bXLN7X4TexZjmqiQcrL5zwjGAkBWFUGdcZG4GqL6LMAe4kwuqbpCDXWoQGkGyYeutpOMqU2Pf3myk0/etWPgeMqDWdAu08E2jwODcwH1t1Oq0Y2Bc2zcQQm//zB0qK75FyBuGy1yzjDOf3UTnJgHwiiw=,iv:pjZPASj6MLrvX1sDUwLjI+oQ7LlXgx/DbT4h8IL+rX8=,tag:gPluwJsmc1uDYjVIUjTtfA==,type:str]
    pgp: []
    encrypted_regex: ^(id|secret|bootstraptoken|secretboxencryptionsecret|token|ca|crt|key)$
    version: 3.7.3
