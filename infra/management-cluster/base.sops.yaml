# Indicates the schema used to decode the contents.
version: v1alpha1
# Enable verbose logging to the console.
debug: false
# Indicates whether to pull the machine config upon every boot.
persist: true
# Provides machine specific configuration options.
machine:
    # The `token` is used by a machine to join the PKI of the cluster.
    token: ENC[AES256_GCM,data:d9CqFPNj6h1efH3vQVlazAh5qQTyyYA=,iv:vWcYoMYnFMByYUhk8MWUJTLOOg3e0KfwBrXsXyp1SAg=,tag:C/QRM/N1WO68zE8NnFwtSQ==,type:str]
    # The root certificate authority of the PKI.
    ca:
        crt: ENC[AES256_GCM,data:Jho9r+nLjlCCX1kB93JmmYYabuWgrK0huFY36na1nugwUwLr3TOpwuNIaj9uprc3BjaDyRr3Vyiv/f4m+YqwB3Vqgsp4cArw8qujsYVoqXi0Jf3g8kOCA3TX1U8JA6rYCy/vk7P1jHU4i7IqIBQ12xLy4pU1/kXttmzEcDM9pv62Ap/e3WRO92gM3SQosmGoCROcFcTFTYzhUxVHHI2tD6mXUV3AeHnzZ2lMUqDFFBW3q9WZOHJkkdNQ9n18hvyWvsPhzLmzWwjojDRPBUewYvhXvviPhDoyFKRuZ1c/0JabErdYdg4jJX7XLYzqU8VPUgE9aVWmnkC7FRpXLq0HctpdOE1oBjapDq7A8vxAWWeA4GzxhCQiXunopFPo3lXa7mGI2eNPKly/VtFjTz8ZlEFIyNL9DYCEp/9SJtFsJGHyvUwelwAbtemGP+mTaH4yy3Lv9cEvfWH5qJ8sh1gvI59DTiqzdVdZBT3G+vH/O1xEasvfKh1brm/LQWMaau4Fr4/THfm0Vl/SH7qYxwQS4oY/M9n9B9uRecaM2XZZ9trDVfrEVE3111lU/pi7VNfgR+x37gHIPeQ0ZLzfa+LjwaOePP9JjBbQaURTpRhaedErogKUvn1S37R3BEapbUrwW+xszQcNXMESyBrc3wMQTK5ClEtqK4G7089tGM0dog74xpDPqZ0MBE8eb+QwhO9LZ9wEIfE+8BATZzt4O33MJGfVx2qxd20mD2YMpUJMX2n74TZh5007P92gHVX44P1hmLGGEWfMrms9TkD3Zys90cLAOv/8JFmspgr2EQRBg+BXg/qGWhAi7Hotb9fzjAAk0co6iHuisnHGKDCe5j7jr3vgfvR8bQTMfjsAm1joAq98iwK8,iv:QJmTlmeppiHH0hi66Pb4Xhkf+h/ZAZUbE8SD/pEoRn0=,tag:U2H7RLf9FT1MwKgojO29AA==,type:str]
        key: ENC[AES256_GCM,data:CMAw5iAi6vc2/VzlgHzNH+oxUcvfGOyDajwbJXuZmDVZFsKgTidvEt8Rr0fQOQz12CPRRt1ryaE+qez2/x8ykdh1qvo8W/x9J7Axuym0P+yjTSgh1CGAogmT8hBEiRaHSwzTN/YBpN6VoLFYHcs+v7hMpDQZg8mM8tr77Ys9i0OEnECt19I5WOOyuZz6PzvXb9cHEsmFElaz3bFJdkFsFUf0VjAV0AATs1qCs7PrKKLj6eAH,iv:PQ1LnsJrZdVn2bwEPP3BqJvE39wC41L6/XRIeicnH9M=,tag:N/yXk8Cx7RiEWY6zOah6xw==,type:str]
    # Extra certificate subject alternative names for the machine's certificate.
    certSANs: []
    # Used to provide additional options to the kubelet.
    kubelet:
        image: ghcr.io/siderolabs/kubelet:v1.26.6
        defaultRuntimeSeccompProfileEnabled: false
        disableManifestsDirectory: true
        extraArgs:
            rotate-server-certificates: true
        extraMounts:
            - destination: /var/local
              source: /var/local
              type: bind
              options:
                - rbind
                - rshared
                - rw
    # Provides machine specific network configuration options.
    network:
        interfaces:
            - interface: eth0
              dhcp: true
    # Used to provide instructions for installations.
    install:
        disk: /dev/sda
        image: ghcr.io/siderolabs/installer:v1.4.5
        # Indicates if a bootloader should be installed.
        bootloader: true
        # Indicates if the installation disk should be wiped at installation time.
        wipe: false
        # # Allows for supplying additional system extension images to install on top of base Talos image.
        # extensions:
        #     - image: ghcr.io/siderolabs/gvisor:20220117.0-v1.0.0 # System extension image.
    # Allows the addition of user specified files.
    files:
        - content: |
            [metrics]
            address = "0.0.0.0:11234"
          permissions: 0
          path: /var/cri/conf.d/metrics.toml
          op: create
    # Used to configure the machine's time settings.
    time:
        disabled: false
        servers:
            - time.cloudflare.com
    sysctls:
        vm.nr_hugepages: "1024"
    # Features describe individual Talos features that can be switched on or off.
    features:
        rbac: true
        stableHostname: true
        apidCheckExtKeyUsage: true
# Provides cluster specific configuration options.
cluster:
    clusterName: management-cluster
    allowSchedulingOnControlPlanes: true
    # Globally unique identifier for this cluster (base64 encoded random 32 bytes).
    id: ENC[AES256_GCM,data:Cg/YPOB2+HxUcMdwkQTTJUqbVCO5/f53y5RDOpcJhAigLne5MZfV4JFI4Yg=,iv:p6waV3Ew0OPKx/KbP0OlyDlrXN45JKNP+rypwW6heTk=,tag:t1z7vdMMBxx6notkaHKIrw==,type:str]
    # Shared secret of cluster (base64 encoded random 32 bytes).
    secret: ENC[AES256_GCM,data:qBwWwUE4b3q7jhXvxHLFYjGs5+mLfqXcSbzDqq4+aaOpuXrcWCpEQlM5DJ0=,iv:ndC3Ljfap6sKDi3dOmYrB6QVJqkUHZi9LAlPoiKF3h4=,tag:YPy6r6oiuNV1CqvHNQB4sw==,type:str]
    # Provides control plane specific configuration options.
    controlPlane:
        # Endpoint is the canonical controlplane endpoint, which can be an IP address or a DNS hostname.
        endpoint: https://10.0.10.10:6443
    # Provides cluster specific network configuration options.
    network:
        cni:
            name: custom
            urls:
                - https://raw.githubusercontent.com/projectcalico/calico/v3.25.1/manifests/calico.yaml
        # The domain used by Kubernetes DNS.
        dnsDomain: cluster.local
        podSubnets:
            - 10.244.0.0/16
        serviceSubnets:
            - 10.96.0.0/12
    # The [bootstrap token](https://kubernetes.io/docs/reference/access-authn-authz/bootstrap-tokens/) used to join the cluster.
    token: ENC[AES256_GCM,data:w2BwFt2gfWYT36iEJcQhONK96QU/Fog=,iv:c4g0OAbCgY9rgjx2FBDhfDGTZUN00oQi8TPuxXx7JbU=,tag:IZQ7kKkgAObojpWnlH0+dQ==,type:str]
    # A key used for the [encryption of secret data at rest](https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/).
    secretboxEncryptionSecret: PZ09M5ZzWPWXxhCW1lpyIZI79tAS51zrtQFD6bUirUo=
    # The base64 encoded root certificate authority used by Kubernetes.
    ca:
        crt: ENC[AES256_GCM,data:Q4c5TAE09wSoWTemjCzIVJZ3HH52UiAMF9VmiU604/iFuyo0tkpCtIWs3taqwJo6hyhfVpDFzdRnVPithmKqwfpMGkdCifcRonsYvZh8NECNqUF7reqTE5GsyIsZLcxu5/cqHMLHwnTn41v9VkPh9nTds1bQ1+5p1v5Wk4iR+UQQGr7PfdHBSM1dTaPc11AhTiepL2THoLA7sQvAkHnr09tY41e/M00Rp92V2yT7CwJBNKF/Uo9IuEZJPVu7Vl0Cbkhb57DFe2RxBiGrVaN61BZT2tgIojuEk91/o7Wni8R3ABe98MuoLMMgV01f9mwlWCpmZgqzbuS5SA3pQtQ8RpzYfqjmS9vpFkMlw73VWgeuI1BZs8MwQpJHP8hOTRMuwPAc+QlrT+otno76EBZxrJn0uurGK79qplRKncupvS0sORwrH3TgAWIhySOEwBPcPSQ0GIs8JKaDEfW/LCejBRfYak0IzcMrdflBd1JF07Urc8qmRU7OzZ6rdaDwA8riTessZzAXb3OO0GQj6z9fgcabPxMe71qjlAVytm1CyNxWXZ4OP6iA4a+/Gm9MY8w2Skln3jxXTonE8ybx86BaciVRgp+vSmBiBk/BzJIJmqIOr7WbCuVpBIY10dxHA/HuoPr31qJcy2sY3AIZLiQ0wzG9ZvvHnKYO7JiTfS5t8UOAY4LzAtTlTURHB3Oo2POc8/+veHYxaxA6Z7zJGuRZCY7vO07/vwAwEBQqVZqGgbky7bbqtZZny/dKTEM3HYDvubpikUY3PLzPIcsEw/ZVaQO7K3iZ3X1+BHICLPIGMD7Lcxiah1awH63F+8ycDdP1m2qtKpeXRImMR1Oz7RKToGYC5yfiL70DgeLf+hfopVB/8G+1Gx0QPn2OvSU7NF69fuDxqKftpuFj/4wLpIjZA2+abZkIchLSnXinAeeug3KQPDQ/5Fc/r1O1kV7RlEGqqUnQLKOGxMykZXgAr4szBgyh4XA/WTOCaZ0ux2XG6TRxBz8c1Eym/V/g8nmU/wjLqUaWKJIBveDtWNczgV+Iof/HGSG8n5LrtDUm7w==,iv:r659uZ7JFHWa0+EeRzYUOE9fOEF7sMOBRk7tq+SZx+w=,tag:uWEyEpq+fGStwAfjWp7iGQ==,type:str]
        key: ENC[AES256_GCM,data:4gUXDxLUDfPLeM6Dln8Wb6MKwxCpkscQfVlE/IgKoqq1JvFvgHgd97j+izD2LHjsa74/0fHab8mDMXGfDXkhIXAn7llt2wXzd8rgGvpFj+X6G2YKTvrh//IEJVOSpPDe3ZjVNuWr5e8MwXLReDHMhEVu4+uwsy0pSfuci+sDgCz01AINAd43Nsi+aYPCaWfFN857/gsapi9zdeiDX4Bo+rvMMe0CwqTRBJjmxr+33X9onOVfVXHYLA1pWv8Nsb8aO/fPQgRljbDpBCc6L1SGbVerLsgFZiXaVaCbb8obKr/lsnPxFIZOXtxiFOLgXaRgO/xODaoEfDvllYoHZiVfS4qQkBBYE9/kjIK7R8A4FH/qyz9+QPyMRFqbqf9haC7VLR35gLpt4fJH5Img/rMSTg==,iv:EoV4Gjy5pj6qSI7+ULPKvqwgl4W96sS8MMa/lrc9UPM=,tag:D05yTe1CEgsXixO7v8yxJg==,type:str]
    # The base64 encoded aggregator certificate authority used by Kubernetes for front-proxy certificate generation.
    aggregatorCA:
        crt: ENC[AES256_GCM,data:i4AzFo1OWPbWgTHc2Va2G4Z5hruxg+xkdwPQGZYmhnSNynAFS6NbupzklkWPwBreDpC0r6k200ki0WquS7x4q7LH6cBMF6aT+ipLKlDZJzgjXJbEskNNFCbhsumkzTcrFdQPL3V/CkUpLRDrQXLLyctN/+P1L3Q+WXVxfr4iTYExWftRjo0idMlNVi2H2QQ4z38K8MWqIfOiE7uqD+S1XWrQCQLpEwjMM1hqQzEuel+LGTLt2Xw6LRfg4SExD4/tXmgLCvbDBHOBPw/N7l4GHBDAQujhj+E/hMTZd76l1gj4RPViVnTp14dOEpVAWZbEPKxSpt/W8UVGr+TXQtIw3sBWV7XHyGrLXH1mzxxLyBN/khD6w8v96mKHGoVKF/LnMDLx80BYGGGIzBhx39sT3qEwAKDCenc1Hv6KiFGgFtNGFur+zEfi57hqY80o9cRmstkNO3wKuZWMcOr8DfTHYbdzFQxPJvvl2zrV/MijzjqukbMyNpwq6wke5DqxwmhqxoJ0Z3pxdKsR3wf+7I7NovRSesga3I9VfV0sPf2kCmedY8jVFGpiKE3W8SKOrvtjHbIao4PGf6wVBigxNZdWizJkVxDCD5BoLlpLlQHZzUkDi132k9qz/+NNopm8EKF5v+J37nH5kRCAxNsWfmGlWWZBqYGnXe00JziVsowxFt0bHuvf0hHk7HTgouHsUbH+CfSbSqUGpRIxyEL/02R5oU2ZUNH+BZIuKYSrDLp+QnSoE7yNUDMiuD4IWJC+ANJzBiBr/O3c4aFTG43vRAs8jF281itNhz3+PDFDGGCyX2J6GY5I6bC2rSO3M5JtT73dE13sRCANjQQ4/Qu0usAHuSte+Wi2hlQPLX841bytq0T/Tor2SehP174R+kXtEuf6dwY729sP260sZRA2XsM//coLIhnlT7QwtDImcESZvwV7+WfJkTaCosWv/XxMatOQ,iv:wrlCMxHSWN0FyqCVM+zCx7um+OSW/aP0g8ADO+kUR54=,tag:yqFO0/Z1yTFkeIYF2Ol38w==,type:str]
        key: ENC[AES256_GCM,data:P5gYMZuLe3+x4EM3lIcfqtO2HdCJi38g4LPdjLg9/EViPaWUK8Wl76Hnye4ChmKrQ1Jao3KGLmhzn/6gSjnQbhuLIH76K0I+UWviHSOLOUD6gJLwz/1OIp5siZwJQSQ5h7lPyy/lXj5K5aXoyABAVPgo1CCJMIqng80kV49gdx1DnPCJDl6OsXYZetDTdpHNdp/BZDRzR6f3FYsqp9H6IZtau/2QAZWILT3hwt2aAdr5pa6Bh1b7BV3KBHb/CKt6vbjdr7K3KTKI9Vx+jnFdUv1EY2vfc9Cbj6CJ6OmlP6IIkABY19eY6tvvVNp5likx6MKmtWf3rJZEebV1rpXgrsLDrzQehiF93CENY3OyonDbsa9T/2gk2FHcveFH0SI7WLmD2IrNsDKsJ+RonEzceA==,iv:D0lmNdVSUSj9ZIiAS8MIbfb3yoeXRoX6ityz8GegE2c=,tag:cIofb439/wNToi6jCRXuMw==,type:str]
    # The base64 encoded private key for service account token generation.
    serviceAccount:
        key: ENC[AES256_GCM,data:dQm1PJiW7gGlIE5Zc4W+0JljR89CJ2JZd6JbgrawgBOsRl9v9xJP4IhuHsl16x8JQj2Z4mwPq6a0ORwn4uhLlxpY3dBbFlSf9SFgoc9w8As+fBvdbhTCFQIB/NkKCfqTrxjYgDV1YE6luesRRsWsDA1q7kR6fMcbOoF9Ok8pSw/rlb3WjKwo5WWwe4ggYY7Aqr6Eap0Gs/xKyPKAuupVluwhVwaD6vIHrtpxRuaaCADeF+BmSAXB2Y7dwCLDxhI9ZCuUuwb+to3Q5ZGjDw6a/1Rudb+jj/Gfw8bTqfOa9ISIW3ZMVQi03CyMxxMmMujiIUq7gdmMNgH5+rm+FvvRHJw/RUJ+Fyi7HYbFfO1J9/WzEplegmm92hNFDPN74Rkd+xcWtnw5ilQoB1ZJtJzNDg==,iv:Qz2SnlOD1X6ZKdUpEeIyBd1TJMVfyP+iwdapbNtAifY=,tag:bG9NnHMMve1nm8uXDXk6hA==,type:str]
    # API server specific configuration options.
    apiServer:
        image: registry.k8s.io/kube-apiserver:v1.25.8
        certSANs:
            - 10.0.10.10
        disablePodSecurityPolicy: true
        admissionControl: []
        auditPolicy: {}
    # Controller manager server specific configuration options.
    controllerManager:
        image: registry.k8s.io/kube-controller-manager:v1.25.8
    # Kube-proxy server-specific configuration options
    proxy:
        image: registry.k8s.io/kube-proxy:v1.25.8
    # Scheduler server specific configuration options.
    scheduler:
        image: registry.k8s.io/kube-scheduler:v1.25.8
    # Configures cluster member discovery.
    discovery:
        enabled: true
        # Configure registries used for cluster member discovery.
        registries:
            kubernetes:
                disabled: false
    # Etcd specific configuration options.
    etcd:
        image: gcr.io/etcd-development/etcd:v3.5.8
        # The `ca` is the root certificate authority of the PKI.
        ca:
            crt: ENC[AES256_GCM,data:pBsQpTwgDnvdSRrrs+GRbeVwVCedcqewwQIr/YBkzmr/vwN+SS8tRkWkEY1Y7z5IK8ReShUlndyon5LM5L0qpHMoRkYSShhfqahxK2bVLisAnxscGwNB8ezj3PFuht+uEbzhevKB2hhF5wELziqZ6avju31RSYPtjBynMIJsxT+a7kee/0DUhp34nzXkdNiFjUsuYG1WtN8T8OE99N3gP5JReUQArFZO30y1tXL8ADnz2jNCzzS2Ohnkym5W1fcn+peEV4FAH5bQz7r5NK57qXAMU20M0Cfm+nf8C3wi9G8q6VqUS5daKJRCyMkrZG0D6r1PjOtehIk0V2RfHjL1tsBY4tC5I380OQ+kxpp+W1C35J91lIhOGP9knVMRubln8W1Ri8cQrghtBYb5uE7paFJCfzNjLRx574zrGm0RuBAqs/RO7E93hJ9sFsAQ4JEP8rmjW2S/0ukgBYsdJpn7MHWbqZhQpa9yTfsInkiPyDyB7fPp2FKamxEqqG1ttRHlaT6U59ki0QOM5LledNmiM8xH3YapJG4LeunGFTxIC+WdnFuPJHRCfZfuGh2dvJFPZH+IUtQiNXqMht8R2xnZJ8N9YVdOFRyWqJDkIWO/3W8F8FrsCbHjezsvU0KfmPQ3YT29IXwdLCdq63WtCyFrk/htjAH1UjiZvYas7Ymt6XnShyHpBo8rz0SkXe4yuaQWMC79IYPhHYHY6rG7Tr0TSIOob/KNcqktn2m92aVPbPWP6E92X01bSHN/XYWXtOtT53JuQqIn92OdBekI5Aowti6tVF+JAVi7IK702nq1+1IHGDIaB4KdfaRd5+ms9/vMvDQUet4fOCT0RVNTjwdXyIAs0v80rHloyw4CRvC2Z0HAGcCYw97QY+2hAikL6WalrFfu7Ee7QYaUjPcg62Rb5HJE5bNUJvNkdI9jqA7ErPUZ9rV09GSq8TB+xdgATmAKfdPoVyKL5YUbe29kaYlYppFvH7C6Ecnx8kGpuOmyrpCO4yAdKi46U2A0RlvHIWN/0kaRNA==,iv:i9I+n+LBtaPtP4kCxT0m/8wIeZuhKqQjovKxM65y1Fs=,tag:rGV/iuZ+fvMttht+vlG+dw==,type:str]
            key: ENC[AES256_GCM,data:Pl0ckHk355AEyRLnp6czh/jPfbkKga1dSz69bu6gzym9jFB0vKrsE021yIk1HK3IZ80YfR6y/jX4xyi+fkXcQCz+Y5bCG21ZPj5ktjHFsHT/qym9Nn0keTGTUq56mXWvfKYYlI+a21qgw6jgcYrttxi1w/EnD1fWV1BcnRrPuLBVwcy3CxAbPIwdlRoyODjWUfG4vEKlhB8d2Z5pq1nV2b1W/JbGP8BRjPkNkhsMSHjGZHqWE9jUF1b6ks+OWA48PrZhwjqzk/3Q+yBZzB0BCYaUv6nSHOYV/Sw4PWIh6Hy5EM3psF8RJVPz7R6tHu27c6IyicGPyMjahELZnttFJWZwnkjs4zeqVV0QVSo2i4x+SO1ryzu9shSludl4AYQspsJDpIh+GxlpC2smATuXZg==,iv:qZAyRdMdipRxVkCh0NQtfos3PjuiLJWKh7GXvGc1Hro=,tag:qpsiU9jGNSvkwls8NqShmw==,type:str]
    # Core DNS specific configuration options.
    coreDNS:
        image: docker.io/coredns/coredns:1.10.1
    # A list of urls that point to additional manifests.
    extraManifests:
        - https://raw.githubusercontent.com/alex1989hu/kubelet-serving-cert-approver/main/deploy/standalone-install.yaml
    # A list of inline Kubernetes manifests.
    inlineManifests: []
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1z6la87sppenwcdcr7lqj8amf5e4x7dq9gzr739cwg5ve6vgj0d8s6cahdj
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBwMzNFOTBIcE1HSDBSUzh1
            dlNvTGhZSGUwMk8zc1V4SHpKMEU3ZzJQZGtrCnNZSGVDUHpOQ1dvbWR4VEJtS3Fp
            TWx4TEhMem94cGg4K2s2azFMNHBqbWsKLS0tIHNJcHYxRGlMMXRrMUVkallQeTBG
            cVdVcWxBTUdqUFlGVmVMTjM1UDNYeGsKaUnX2qYN93BLhvWGscNSQriE9tVAcsDu
            u2pYRzwtLiDS1D+OE00PnmhZJZL/TJNUVX44qFGQGufpdS0NzZIYwQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-08-17T19:48:27Z"
    mac: ENC[AES256_GCM,data:+TRHJyUizgXXMZ+yWMYQ46GFFr8E1+bykGOeZXfi382cEMno4+s+ALttqo/mELpbEcIf1QcBLEpjRiQht0s19hbQjRpu6fU7DdBytEHDoMvlDVbGDb10KIPlQN9hXgM1M5k+flkdcAbEFk/5h/zZoGbTStNRSjfmjhMrQjaAKbY=,iv:HPZ9D5HSUsAXFKQDwbVbAbAC5mPhPHlR+iryp0Sn7fI=,tag:5bHDDund9y8eLlxRYbFB9Q==,type:str]
    pgp: []
    encrypted_regex: ^(id|secret|bootstraptoken|secretboxencryptionsecret|token|ca|crt|key)$
    version: 3.7.3
