# Indicates the schema used to decode the contents.
version: v1alpha1
# Enable verbose logging to the console.
debug: false
# Indicates whether to pull the machine config upon every boot.
persist: true
# Provides machine specific configuration options.
machine:
    # The `token` is used by a machine to join the PKI of the cluster.
    token: ENC[AES256_GCM,data:SXJyqD+XCvbUsY6vE6343C5Qp+zvA5s=,iv:Y5E9nakRChL0NDILr9hZOC2MAAU7qfI2+4gvcnkUssE=,tag:aWjelecFtI1+AbbQdAymGA==,type:str]
    # The root certificate authority of the PKI.
    ca:
        crt: ENC[AES256_GCM,data:NLtMKxqY9Le/QSKWF7/OZdE6/N8xae/El6+/a9kdMDiw+c3yJuLZ8rAsv/527Py4iQ/qY4Wq/FAF3oeaFb8pkH6KMs2sNT+ika67Jhj5kLFAe06BNA2PuXRMwA3+ZW5rAMWnaxvwQBO5QG0LVN+lOMtwPU0Aj4rLp1usH+ClNzKpXnMSDh8mBE/9FUi+UxEqipuQPIIsj6w8aA7sV9vqvObtuYfYXr3mHS9n6rEP3tVB0meovfIcVcTQrE9rX6c79DBAhEDDLovT5ARIxAyjOar2ZXbgcpveUYjfHIgx6oLL25oyTOy0wtjPnbPxF+fBbTaztPnXS3FPwcXW6kTZNtecDr2JFLsUlRCbg0X0rOeaokY6P72iuhIqjl+MbBDg9K9h2T6reyGVbG2fNFfxhudee12UPFPEjV8D4xe9vWFpMM6N3MsptrHgWZL867ivWZYwx0UCMWib0zVIlxWZCukasEEM/eCorG94ermNGtH2eooOygxwjfnFMTS3qhI6cpYK7GFZKHg55TDc1C7X7iMjxrwO52ZR9woBxLSBdjlZ1IdYn8pifo+Df4l6BH7vuXLeuICybvM1o4O8p4cffPMrwJnQT9hAymJ3Br7874MAyzl2JcWnQJAIFeCP+PRFNpfDqzrSLXWzvZh/aYaHyPGScNcIXR+Qjn/ENVb3GWsrd1s6jSgECwe7EyzCiCmhW0dBF3gYbTiDy5/F2fwN8BYhYiNnfZrRvSpIs0+0AuMavz1qgFo73kBKyhFaaCaIMEaO4e0AkvIFe1antbcyy4siJv0668fQ/KBU2+oxo8MTBC8owYDH74ZpNZHLpDbGS2erSCXak5VJUy2AeM56aaHJ5KLao7qchKV+B8D1YXg4bSVV,iv:ISYJeENY3XkKZfQYd3ByoYQiGZetVlZHEMoG1Y+qYJo=,tag:fVbWj5hAJMXJFm+qr6RM4w==,type:str]
        key: ENC[AES256_GCM,data:79aNt4RkmA3xivb4ayv7xgDvpXwipjGjymYRCBespVyX6s88yB9jRVtYahLi+/69E2PkIOf0SS4Z2naK8JL4/5wSqySySfJ6FdO21v8ya+Wg0jwoL4sZ41/2rOLv6z44moBGTEFVleh4R+l6y7BLISXbTxAzpSoFmNex6ss2AQ8udf3HmlJaCenCghpDvYIKW+jqBUUk2m0TKGfu+ZCyEI2fYv24cPaGj6xhlKY9rwnLqOAs,iv:mMYHlGvwrumq/YytHlJUOfXMWaPY1zhxP4RNBfmgXYw=,tag:8CWqGBTupTmo4IuIQI8nqA==,type:str]
    # Extra certificate subject alternative names for the machine's certificate.
    certSANs: []
    # Used to provide additional options to the kubelet.
    kubelet:
        image: ghcr.io/siderolabs/kubelet:v1.26.6
        defaultRuntimeSeccompProfileEnabled: false
        disableManifestsDirectory: true
        extraArgs:
            rotate-server-certificates: true
        extraMounts:
            - destination: /var/local
              source: /var/local
              type: bind
              options:
                - rbind
                - rshared
                - rw
    # Provides machine specific network configuration options.
    network:
        interfaces:
            - interface: eth0
              dhcp: true
    # Used to provide instructions for installations.
    install:
        disk: /dev/sda
        image: ghcr.io/siderolabs/installer:v1.4.5
        # Indicates if a bootloader should be installed.
        bootloader: true
        # Indicates if the installation disk should be wiped at installation time.
        wipe: false
        # # Allows for supplying additional system extension images to install on top of base Talos image.
        # extensions:
        #     - image: ghcr.io/siderolabs/gvisor:20220117.0-v1.0.0 # System extension image.
    # Allows the addition of user specified files.
    files:
        - content: |
            [metrics]
            address = "0.0.0.0:11234"
          permissions: 0
          path: /var/cri/conf.d/metrics.toml
          op: create
    # Used to configure the machine's time settings.
    time:
        disabled: false
        servers:
            - time.cloudflare.com
    sysctls:
        vm.nr_hugepages: "1024"
    # Features describe individual Talos features that can be switched on or off.
    features:
        rbac: true
        stableHostname: true
        apidCheckExtKeyUsage: true
# Provides cluster specific configuration options.
cluster:
    clusterName: management-cluster
    allowSchedulingOnControlPlanes: true
    # Globally unique identifier for this cluster (base64 encoded random 32 bytes).
    id: ENC[AES256_GCM,data:AEA5FaomtILTeq6d+TJR5+txUBI+QAs25YBc8th3o76V8kh9WwPfii9Dcco=,iv:f6y368tPJi3LjsfZzOa3OqqyWsm3kCQH6fCmfx6IvY4=,tag:c7u5J6xyIW69nvGicNlmHA==,type:str]
    # Shared secret of cluster (base64 encoded random 32 bytes).
    secret: ENC[AES256_GCM,data:ruvywKDnUpG1Y4tKXCSdczQbHttzuk200i+BmEEMAPWdNGukWPYropat7rw=,iv:yU8tDttF3fSeQH1KYv1eYmzVvMHl0Kh2ADb0D+7x8ak=,tag:a7HDYUDZBOA7+CX/8ffW0Q==,type:str]
    # Provides control plane specific configuration options.
    controlPlane:
        # Endpoint is the canonical controlplane endpoint, which can be an IP address or a DNS hostname.
        endpoint: https://10.0.10.10:6443
    # Provides cluster specific network configuration options.
    network:
        cni:
            name: custom
            urls:
                - https://raw.githubusercontent.com/projectcalico/calico/v3.25.1/manifests/calico.yaml
        # The domain used by Kubernetes DNS.
        dnsDomain: cluster.local
        podSubnets:
            - 10.244.0.0/16
        serviceSubnets:
            - 10.96.0.0/12
    # The [bootstrap token](https://kubernetes.io/docs/reference/access-authn-authz/bootstrap-tokens/) used to join the cluster.
    token: ENC[AES256_GCM,data:/N8aAtdn3QgCttGvFqRRAR20YuFUlmw=,iv:+eIMqqiLsArWcS3BfkB8/Hc7Q6D9+PlS4pjUuuBW/9s=,tag:bGNNENZux6uQUBuqQWwqpQ==,type:str]
    # A key used for the [encryption of secret data at rest](https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/).
    secretboxEncryptionSecret: PZ09M5ZzWPWXxhCW1lpyIZI79tAS51zrtQFD6bUirUo=
    # The base64 encoded root certificate authority used by Kubernetes.
    ca:
        crt: ENC[AES256_GCM,data:nRkNBqPYPkTWQZ3yfYkpchRw0ZxJVShl98iYN6MXi3G0Pew0JEgr7XGh7sG2UPSLyOlatSXCEYiYm4qiCwJYpJzRasZokH6NoPNjv2qvqt8+58fYQGLljDNE/y05Mncxk/s11MvFok1JNZCI9sl792XdyDpuSyADv5p5kGMV0K1mAt1G6fk855Kb4o14e7b44hjEHPRA+dibPxtlQIsbAh6E7A/yil0xYZyNMRV/wWK+4P2ynkTJ+i/T2oDMWTtyVFkc/HX2y1v4U3B4stTLuVmrSsfgI8Yb1HVe8+HOQ5TpqYkNP3oh9lKeSB5+c99s6bak+Rou/ZntFHMgpVZDCDS8u8Af+ENkXL9NVFLNd1CtLb051dL4kANiCJ0SKqAQ1rDQ/gZVurfzy8iavAF33XCgOj/8TBIwB7llOpzRcKGdOhGhAkFC8SaEgwp7sXA2DDUEa9zzAV1x9v67LUF1RwL6Kug+da0iCnrCjzrKxdl7hbmLJe9ZNhNtSuE38U+h3Jmmx7mEWq38E62udE2UQHWdPzhWdgJut3r39MgbGSPlPwal6BrW/KoeymlJMB0ETSeCdG57O9WPvQeqUsG/ckOH2sqaBPBd4G9vYtjZgVPx4P4pajt5wRwMmHdHJ+2ESO+rv8zqnE6+Soeisyg2VRRiv1UDcrQPJPIGH/hQ9JVjok0NPlSZ47UiqDmLQOng8M1Id0pQSIOpI//Za0ZeaiscfdjfvrbPqwN1b2DN8+dRtYnqUlTJiQRKY3v6bl3Fje2YoVS2oS6crbAjEi5xZMSJlCConHqfRI3ErC3VmRzPkjEjr7cAEofBqtMawlS9yHviwTqAYVG2saPcOIhVEg9JQg0b6O8LkVi9jGwg45hNX7hs1g8H3v6nGTcYGbTvWCkkpw6HyWwe2SnxCpcKDhUJerWc5CtlTtYcJYlzacCn8LB2Jm4r3Vg4g+OS4Voo/VKnsSg3dfZrcL8nxgP8bMX+bHe5G8pmpLdzsiSEtf8CRasjnX656mzddDEHTlX6UMLpjwFeM7kcW42pE2YXhpqAj3Qtu35rvONLIg==,iv:K4IPN2vlhf8ZwUiKLlu0oAOjtVDbxDONUtkgnOg2TQ0=,tag:lDtN4l5Dn7i2zBMLaRsSyQ==,type:str]
        key: ENC[AES256_GCM,data:lJk0uk5cNvgQrYTmtC36d4n55MfGzM/xkHAQOCCBZ0fCraRv6nDEC6vV/HP7ikK1d1b3EvadbhDJ24xuoOLkZmdi1Q6Q+kVOImelaLiOoTVtwXxhQnTng/jC29hhqLn6BcsczMCXXSsDJ7LrMlXG1e+iDVdhBnKbv1DAJww8ZvvurZRoseDsl5TAq0ofBngkjm5VX8W9zVA3I11kN/15gQ1eCWZlDwzZScO7ReB2aGCFQpacRjUd4qBZST+uV/J0WxdIeDogsZxiL8eQ8qTF85xnTCDcYFxxCWtZisZG4E4lRTVHTPsgFILxhETlTus3mQs02h3iz6kbg0gzfBQS2sd3/0EzKGTDBSeM/cOAAR5BqYXSPF1xkuseRQELLLANdbYIzM+hf+eMZFAQkKnVsQ==,iv:Cb8fV1bcnk2NRi7R4/WeVikkTQ1V4Jvrr/+HCAunhN0=,tag:K2sepJKX2H5oebBzLel2bQ==,type:str]
    # The base64 encoded aggregator certificate authority used by Kubernetes for front-proxy certificate generation.
    aggregatorCA:
        crt: ENC[AES256_GCM,data:jucrJxSJRtj/BSHmwkfSF8T4QY2bCCDglHypzNELoYqFSBzBUrvbG7qulN/dKt4ILeQ1OjPzsb7gJGdPnz1FeLyGIz+2P8ofcbuYkJINJHkOni6Ld600uuTup4AhZ09ch0iULUzZPcGyCy56WuJ+sZbYUaMSltbaQCSXBXe+gKIgKw+fwAGWkcMMNdYHG0OgQXYHD4b6xUiFjAtHbq0vN5gwUzHC37AeNFzdykErXVzZbV1ObDzht/382AyNGN7wwxzhgJGnFg8KDQC2AvayYU0lmzeIZJQRc1rQWPF4qXIbQyoF0XtsLSLkDJrz9GAZq4grYLtZfMJ7NXybi26GJYKSH1FLbYKkbxz4RhcIVzPsaICTbS8DlOReAjKZpmpTEXH/3XwnSb0boYWNoeL1yPr/4x/EKao70rPshx6HfBlCvXifyukcqKIKExoX4VCQIdRNfHUQTE3WjQY2egvKOt6n9gkVwXhK32wgwglYegtLUnVU6SPWrsA5W2DH62BMlTwrE3oK19XK0TkO18z7+eCUriBQDYHlQ1O8F/Sk8lQPbm2kMvbzmzDB0ttqmcXxZ4RGu6cn7mi9j26BEYOw2VyhzW2/seqjMp1utyBa4ECcEgTL8byE3cevcYQUqGslz+9eKmUvsjBIUHvshi77BPQTYQhvO9g8/ah6jJpK+UN9mPrabxwYyrdXOXXAaEMbA/x4NDPDhFoht5PmgL0iE49eaxoigNrXJbTnd6yuR/aEk6AfGEYZwNcNknullPjv+rE89KreVlRSV6eMnwaoIKoY+rHf975mmpT3fMGnE3OiN+WDiaxqH7eNCn0l3Yq2pWbbhcUYMYtXDZdSmnPjpBFvTg2srsGgbJqDYxtXr+yBk8IjAnoYmi/d5tOn9XY49rKQLsf5K4M0tLUcelUwrpA3KblWwOh1aLKuVmSE1uuYydJ7kxmpKjpzyZPH9xJy,iv:uAKa7d9Yz+Txd803lvRNB9LLG8swVRj2kvw5YjUJGwk=,tag:v44OCwE5BED6UmOz5rmS5A==,type:str]
        key: ENC[AES256_GCM,data:Rw2AmevEwkrH/kZxsvDhcXItovVo826ESr9NKYPcTEw/OvOmF6eNC2yrhSg7lBHfIS7l4phgwjNT6CvxI1eqchkJORsp/nGelapLM9IymiuGq9swDoLxq5IfCvNBaunwEcGAcCPF1vmddRVe+hfzLNQIV1g64iVdDwIvuqqAkGdrBER6610RDB0Q0guFwmyxGpRlBYRjyq02AaTUMdTGtPFen6TwWc3mUVgefF9T0wBZ5jhpHsvBkk0LnbEJgSx2pzAQX3ClEVnjRSgvifzAiF9/5nToOMEcsN8xVelBIhxL9BO1yOgPHWU9YIZXVzO4u3DZPrkJUgZ3i1l+c3Z1Vb+2/lmK0xedlmvhTjC553byVCv3xKMKqnK2X2GxIz8WagFpa3DbrErUgZE/5gm4yg==,iv:nmpGhUl1EeHYUUtD86aWU6hwO4VUGFik88yiV8HDBjQ=,tag:DLCVfUGs97HM9GaS7IY0lw==,type:str]
    # The base64 encoded private key for service account token generation.
    serviceAccount:
        key: ENC[AES256_GCM,data:1619sRv8qk1dOGtajqRTz0wF4+jTIiu0l3PSvyzRZyKrBfxwlQujc03UZDdYD6GGDj9Uml+zkw5WWJCkq91soVL4owN8L8Y9uWnQoKImCg6s5iXdmUU3B0MeUMLv6x1qD2XLU+kkIH74eGTxigY9jea07d5B9rvyehecNdhSa/DU+g11ZEluO+yS9zJdREES8JrP5MINvnSa6PbogV0Wfom6Mn8Kv8yIONDLfbjPRueBMPDkDos1IvmsJ3NHGi2ddVuueJdHyC4bli1BoPcnN/LNi5tMK4YzvCehErutKV/17Tks5I46HFzgKyIM+bsREP9IQbMgFwK6fehUdeRK2K71wQGlhg9QTQ74o8xgpE9ZTgeQTHA0Nhhm1HBOEzDFArL9XXz3oNGlZzaUJPKKZQ==,iv:/jYv0vMvjtZd6mIi02vqvBviLchhwyMn09ohue7wCgU=,tag:l8aV+qZALT2/sBz5sELciQ==,type:str]
    # API server specific configuration options.
    apiServer:
        image: registry.k8s.io/kube-apiserver:v1.25.8
        certSANs:
            - 10.0.10.10
        disablePodSecurityPolicy: true
        admissionControl: []
        auditPolicy: {}
    # Controller manager server specific configuration options.
    controllerManager:
        image: registry.k8s.io/kube-controller-manager:v1.25.8
    # Kube-proxy server-specific configuration options
    proxy:
        image: registry.k8s.io/kube-proxy:v1.25.8
    # Scheduler server specific configuration options.
    scheduler:
        image: registry.k8s.io/kube-scheduler:v1.25.8
    # Configures cluster member discovery.
    discovery:
        enabled: true
        # Configure registries used for cluster member discovery.
        registries:
            kubernetes:
                disabled: false
    # Etcd specific configuration options.
    etcd:
        image: gcr.io/etcd-development/etcd:v3.5.8
        # The `ca` is the root certificate authority of the PKI.
        ca:
            crt: ENC[AES256_GCM,data:uuQZ0xOZr9nAyUcMYIpeh86YOhIu/M0KDudYH/JUXUkLbelENBJIS5ndfcVYDAbhManfncuPMZEO8PYlSynR1zi7jojUhclm99nlS8J7S27ojbkPciXU5Pr4RrJx1iyfSKn18bCjdeV7JcqhNh/tJ5Qz331USDyzGxvUyACM6kmWp6EeAE5yy3m67L48+rWMN5fkDWAMF2tbgGlh8nOlggunBkW9h8b5OJ+UEnDjri1U7FU+m6utldUXQQxDATRNPg4d/IyD2yF+rMSgLgFqXKSf2RE32F2Xm2GXxZD+tbsE9otfbKmZJ5LeK2krBrhCZp3xjbOYxfyNBBFoMHxu1hZaRDMfckN8cdwinMin9fKRinhmni5PAR+rJaZLiiRQ79u1aCul/dalkKkmstd/Ks6ZTdfz0HUGlOdmswVrA6cleRhMHfs23Qc78PhnbN0TQlzs5qOELDtp1EzBv1EC83bHTeBQOcuSVO/Cong7Q4YEx4SZSKEy3e2acJNQAtnn0nrliIE79n+PDzRwGJ4sA9+aGjLFzxhxdz9mTeo2VsDnCu+1Ng4jVbXf7NRGnrKBrYG6ZLE5VPTH4ec14m7o5mGfrOqqon8yy1sksXRWp+k7AWWydjbjH7MTrO9g1Y+N7Gtc2xq2W5VkBZRp7+8ukT889iY1/1DhU/QgjtvzCqGt9XhEXFHPqDNrXx57N4PmSVvjnvdk210DVYMGTwc0yJA9kI5+1kP0NZ9kQBXm8v7X7WGplCLiicAO10NdEIFteobOpjZ/UI56qRiYK//Ihk0uj7+/fuFJq8JNjTWjBWh30nUJXVeuApjv2OoXXLQcix9FsWaHg9i0YW+wBTIG+2qcPG6d88EhDcsufr2afGrv9VlERxxo9Mbsm+SMBsRTq3zGqOn3/biSl3EwmlXY7yPQqVihEQCEnz2/fD5DkrGUTQyppl5IXBJpHUQu2S+FCni/UwnzA0KtKdJg2TNYfPF8FWPTVfHogatiK0pU/14BWpvQ70ScDLintemQQW4z1UKD5A==,iv:5O5B+v1Cpki7j/yDMwGL08gx+cnEu9vhJQDIQ80XBuc=,tag:VLvE+VU9Ng10mNS0/Cv6+A==,type:str]
            key: ENC[AES256_GCM,data:mn5KVDA4Go9sToYbkuGbNhrIMwXkPUen7hfNljJCZhH9xhtzQGu3qBA4BE9uBQEjIfcd2/P6awkG2ntVXcVeilq3KPnBeWwS39AxPdXn9hSOmfwuWOWfInXGTFShoTZLoM/052dEV2BLd3zi2DNxeQo+iGuMR7fvmQ5eoVtjFvPvLM8f6mtJd929db1qiPuobyPBVd9u6uCWC3YDRfK9ypvZHj/QhW+u4M188ze6T7+BtUUplxAaJQyTsCqH3eWhq2xg23x1zQxqEIC5w6hZdX7k57b8jKjdAabbSn6PJEHmMVQ6zTcWmGoW5QgJgPqQ6HRz9l1Ku7ZdgVbk+z5fHGy64Ktd13X9MkqsgUiizQgfwMpFkf+xJkKtY0ohQMjolEdJ/efcaiqz1nG4HD1Lrw==,iv:Cpe5bP+J1u1FFuUdoBZs1SieQKOw+3Om5wsoJLk9+g8=,tag:rU3xJh4lHadf3TFr7Aj72w==,type:str]
    # Core DNS specific configuration options.
    coreDNS:
        image: docker.io/coredns/coredns:1.10.1
    # A list of urls that point to additional manifests.
    extraManifests:
        - https://raw.githubusercontent.com/alex1989hu/kubelet-serving-cert-approver/main/deploy/standalone-install.yaml
    # A list of inline Kubernetes manifests.
    inlineManifests: []
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1z6la87sppenwcdcr7lqj8amf5e4x7dq9gzr739cwg5ve6vgj0d8s6cahdj
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBRMENSMDlwd2dtVkZWYnNH
            U1ZRTWFzRktCdnNhT0hZaW03ZWd0RnFGVzBJCm9pTEplZ1JkT1k5cExaNEpYT1NB
            ZVpqMW9xWnljSVpQZWRMdXRUSHhOb0EKLS0tIGNSeVJ5VFBlQUhwbjJ6by8zaUlG
            UENEOHN6WTk2WCthK3RBcW5NaHVOc1UK2a3teCCl/4F9AHmqvXmQeWIapwPSMACz
            zGx2+/zUKcN07jt8qUJ9ksjdPfLSi5fFkyo9Dm1TeHAOYPu7+RheEA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-08-16T23:13:58Z"
    mac: ENC[AES256_GCM,data:gcLtBhHuTmphqIRXtdiykKxh4zRJFpVng7+Hk6s8ZbEDeRH2E0ygmYxFOew1NIliwRWuHGX6DYfmmWcXQY2uHRNd02J4qI4VShlW0n41sXNiiQAHLgXKGDSU+VRGGRadEmO4oBRPseAU/1ROp2qjZu9q+pJWeg9A619+kLyyC6I=,iv:YqHSMUufe7L1vErP7WY4dgfIib8wR36V1EfUmzKYrWI=,tag:23HtQIDCMWFAAq0yvtU5mQ==,type:str]
    pgp: []
    encrypted_regex: ^(id|secret|bootstraptoken|secretboxencryptionsecret|token|ca|crt|key)$
    version: 3.7.3
