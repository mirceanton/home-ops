---
version: 3

env:
  EDITOR: code --wait

tasks:
  sops:encrypt:
    cmds:
      - sops --encrypt --in-place base.sops.yaml
      - sops --encrypt --in-place secrets.sops.yaml
      - sops --encrypt --in-place talosconfig.sops.yaml
    silent: true

  sops:decrypt:
    cmds:
      - sops --decrypt --in-place base.sops.yaml
      - sops --decrypt --in-place secrets.sops.yaml
      - sops --decrypt --in-place talosconfig.sops.yaml
    silent: true

  edit:talosconfig:
    cmds:
      - sops talosconfig.sops.yaml
  silent: true

  edit:secrets:
    cmds:
      - sops secrets.sops.yaml
  silent: true

  edit:config:
    cmds:
      - sops base.sops.yaml
  silent: true
