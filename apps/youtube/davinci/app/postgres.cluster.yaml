---
apiVersion: postgres-operator.crunchydata.com/v1beta1
kind: PostgresCluster
metadata:
  name: davinci-postgres
spec:
  postgresVersion: 17

  users:
    - name: davinci
      databases: ["davinci"]
      options: "SUPERUSER"

  service:
    type: LoadBalancer
    metadata:
      annotations:
        metallb.io/loadBalancerIPs: 10.0.10.251

  instances:
    - name: davinci
      replicas: 1
      dataVolumeClaimSpec:
        storageClassName: openebs-hostpath
        accessModes: ["ReadWriteOnce"]
        resources:
          requests:
            storage: 4Gi
      walVolumeClaimSpec:
        storageClassName: openebs-hostpath
        accessModes: ["ReadWriteOnce"]
        resources:
          requests:
            storage: 2Gi
      resources:
        requests:
          cpu: 20m
          memory: 128Mi
        limits:
          memory: 512Mi
