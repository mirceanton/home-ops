---
# yaml-language-server: $schema=https://taskfile.dev/schema.json
version: '3'

tasks:
  default:
    cmds:
      - task: yaml
      - task: terraform

  yaml:schemas:
    desc: Run yamllint using the custom config.
    cmds:
      - python3 {{.ROOT_DIR}}/scripts/yaml-schema.py {{.CLI_ARGS}}

  yaml:
    desc: Run yamllint using the custom config.
    cmds:
      - yamllint -c .github/linters/yamllint.yaml .

  terraform:
    desc: Validate all terraform files for proper formatting.
    env:
      DIR: infra
    cmds:
      - bash scripts/terraform-lint.sh
